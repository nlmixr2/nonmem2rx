<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="nonmem2rx">
<title>Validate rxode2 model against NONMEM • nonmem2rx</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Validate rxode2 model against NONMEM">
<meta property="og:description" content="nonmem2rx">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nonmem2rx</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--converting">
    <span class="fa fa-arrow-right"></span>
     
    Converting
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--converting">
    <a class="dropdown-item" href="../articles/import-nonmem.html">Converting NONMEM to rxode2 model</a>
    <a class="dropdown-item" href="../articles/convert-nlmixr2.html">Converting NONMEM to nlmixr2 object</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/rxode2-validate.html">
    <span class="fa fa-check"></span>
     
    Validate
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--simulation">
    <span class="fa fa-dice"></span>
     
    Simulation
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--simulation">
    <a class="dropdown-item" href="../articles/simulate-new-dosing.html">New Dosing Scenarios</a>
    <a class="dropdown-item" href="../articles/simulate-uncertainty.html">Simulating with Uncertainty</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-reporting">Reporting</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-reporting">
    <a class="dropdown-item" href="../articles/create-office.html">Creating word and powerpoint documents</a>
    <a class="dropdown-item" href="../articles/create-vpc.html">Easily create VPC plots</a>
    <a class="dropdown-item" href="../articles/create-augPred.html">Create enriched Individual plots</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--debug">
    <span class="fa fa-bug"></span>
     
    Debug
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--debug">
    <a class="dropdown-item" href="../articles/read-rounding.html">Recovering from Rounding Errors</a>
    <a class="dropdown-item" href="../articles/add-cov.html">Adding a covariance step</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fas fa fas fa-rss"></span>
     
    News
  </a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nlmixr2/nonmem2rx/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Validate rxode2 model against NONMEM</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nlmixr2/nonmem2rx/blob/HEAD/vignettes/rxode2-validate.Rmd" class="external-link"><code>vignettes/rxode2-validate.Rmd</code></a></small>
      <div class="d-none name"><code>rxode2-validate.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nlmixr2.github.io/nonmem2rx/" class="external-link">nonmem2rx</a></span><span class="op">)</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nonmem2rx.html">nonmem2rx</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"mods/cpt/runODE032.ctl"</span>, package<span class="op">=</span><span class="st">"nonmem2rx"</span><span class="op">)</span>, lst<span class="op">=</span><span class="st">".res"</span>, save<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> getting information from  '/home/runner/work/_temp/Library/nonmem2rx/mods/cpt/runODE032.ctl'</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> reading in xml file</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> reading in phi file</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> problems reading phi file</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> reading in lst file</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> abbreviated list parsing</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> splitting control stream by records</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $INPUT</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $MODEL</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $THETA</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $OMEGA</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $SIGMA</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $PROBLEM</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $DATA</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $SUBROUTINES</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $PK</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $DES</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $ERROR</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $ESTIMATION</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ignore record $ESTIMATION</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $COVARIANCE</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ignore record $COVARIANCE</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $TABLE</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta1` to `1.37034036528946`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta2` to `4.19814911033061`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta3` to `1.38003493562413`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta4` to `3.87657341967489`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta5` to `0.196446108190896`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta1` to `0.101251418415006`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta2` to `0.0993872449483344`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta3` to `0.101302674763154`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta4` to `0.0730497519364148`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> read in nonmem input data (for model validation): /home/runner/work/_temp/Library/nonmem2rx/mods/cpt/Bolus_2CPT.csv</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> ignoring lines that begin with a letter (IGNORE=@)'</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> applying names specified by $INPUT</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> subsetting accept/ignore filters code: .data[-which((.data$SD == 0)),]</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> read in nonmem IPRED data (for model validation): /home/runner/work/_temp/Library/nonmem2rx/mods/cpt/runODE032.csv</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> read in nonmem ETA data (for model validation): /home/runner/work/_temp/Library/nonmem2rx/mods/cpt/runODE032.csv</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> changing most variables to lower case</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> replace theta names</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> replace eta names</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done (no labels)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> renaming compartments</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> solving ipred problem</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> solving pred problem</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span></code></pre></div>
<div class="section level3">
<h3 id="comparing-differences-between-nonmem-and-rxode2">Comparing differences between <code>NONMEM</code> and
<code>rxode2</code><a class="anchor" aria-label="anchor" href="#comparing-differences-between-nonmem-and-rxode2"></a>
</h3>
<p>You may wish to see where the differences in predictions are between
NONMEM and rxode2.</p>
<p>The <code>rxode2</code> generated outputs are compared with the
<code>NONMEM</code> generated outputs for the following items:</p>
<ul>
<li><p><strong>Population Predictions:</strong> this shows if the model
translation is adequate to simulate general trends; This will validate
structural model’s population parameters coupled with the model
structure.</p></li>
<li><p><strong>Individual Predictions:</strong> this shows if the model
translation is able to replicate the same values over all the subjects
within the modeling data-set. This validates the model can reproduce the
between subject variability observed in the study.</p></li>
<li><p><strong>Individual Weighted Residuals:</strong> this is one step
further than the individual parameter validation, it couples the
individual predictions, the observations and the residual specification
to generate the individual weighted residuals. Since you can <a href="convert-nlmixr2.html">modify the residual specification to create
a nlmixr2-compatible model</a>, this step is important to make sure the
residual specification is the same.</p></li>
</ul>
<p><strong>Note:</strong> the only part that is not validated with these
three metrics is the between subject covariance matrix,
<code>omega</code>. We assume this is correct as long as it is read in
correctly.</p>
</div>
<div class="section level2">
<h2 id="comparing-numerically">Comparing numerically<a class="anchor" aria-label="anchor" href="#comparing-numerically"></a>
</h2>
<p>If you want numerical differences, you can also get these from the
modified returned <code>ui</code> object. For the rtol, atol as follows
you have:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span><span class="op">$</span><span class="va">iwresAtol</span></span>
<span><span class="co">#&gt;          50% </span></span>
<span><span class="co">#&gt; 1.137824e-05</span></span>
<span><span class="va">mod</span><span class="op">$</span><span class="va">iwresRtol</span></span>
<span><span class="co">#&gt;          50% </span></span>
<span><span class="co">#&gt; 2.041157e-05</span></span>
<span><span class="va">mod</span><span class="op">$</span><span class="va">ipredAtol</span></span>
<span><span class="co">#&gt;         50% </span></span>
<span><span class="co">#&gt; 0.001770218</span></span>
<span><span class="va">mod</span><span class="op">$</span><span class="va">ipredRtol</span></span>
<span><span class="co">#&gt;          50% </span></span>
<span><span class="co">#&gt; 6.886608e-06</span></span>
<span><span class="va">mod</span><span class="op">$</span><span class="va">predAtol</span></span>
<span><span class="co">#&gt;          50% </span></span>
<span><span class="co">#&gt; 6.406839e-06</span></span>
<span><span class="va">mod</span><span class="op">$</span><span class="va">predAtol</span></span>
<span><span class="co">#&gt;          50% </span></span>
<span><span class="co">#&gt; 6.406839e-06</span></span></code></pre></div>
<p>You can see they do not exactly match but are very close (I would say
they validate). However you can explore these difference further if you
wish by looking at the <code>ipredCompare</code> and
<code>predCompare</code> datasets:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mod</span><span class="op">$</span><span class="va">iwresCompare</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ID TIME nonmemIWRES      IWRES</span></span>
<span><span class="co">#&gt; 1  1 0.25    -0.73154 -0.7315635</span></span>
<span><span class="co">#&gt; 2  1 0.50     1.86670  1.8666295</span></span>
<span><span class="co">#&gt; 3  1 0.75    -1.26860 -1.2685934</span></span>
<span><span class="co">#&gt; 4  1 1.00     0.44442  0.4443967</span></span>
<span><span class="co">#&gt; 5  1 1.50     0.55470  0.5546777</span></span>
<span><span class="co">#&gt; 6  1 2.00     0.35351  0.3534849</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mod</span><span class="op">$</span><span class="va">ipredCompare</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ID TIME nonmemIPRED    IPRED</span></span>
<span><span class="co">#&gt; 1  1 0.25      1215.4 1215.363</span></span>
<span><span class="co">#&gt; 2  1 0.50      1191.9 1191.929</span></span>
<span><span class="co">#&gt; 3  1 0.75      1169.2 1169.169</span></span>
<span><span class="co">#&gt; 4  1 1.00      1147.1 1147.062</span></span>
<span><span class="co">#&gt; 5  1 1.50      1104.7 1104.724</span></span>
<span><span class="co">#&gt; 6  1 2.00      1064.8 1064.762</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mod</span><span class="op">$</span><span class="va">predCompare</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ID TIME nonmemPRED     PRED</span></span>
<span><span class="co">#&gt; 1  1 0.25     1750.3 1750.290</span></span>
<span><span class="co">#&gt; 2  1 0.50     1699.8 1699.834</span></span>
<span><span class="co">#&gt; 3  1 0.75     1651.3 1651.349</span></span>
<span><span class="co">#&gt; 4  1 1.00     1604.8 1604.752</span></span>
<span><span class="co">#&gt; 5  1 1.50     1516.9 1516.913</span></span>
<span><span class="co">#&gt; 6  1 2.00     1435.7 1435.723</span></span></code></pre></div>
<p>In these cases you can see that NONMEM seems to round the values for
the output (the rounding rules are based on the <code>FORMAT</code>
option), but rxode2 seems to keep the entire number.</p>
<p>Note this is the <strong>observation data only</strong> that is
compared. Dosing predictions are excluded from these comparisons.</p>
<p>You can also explore the NONMEM input dataset that was used to make
the validation predictions (dosing and observations) by the
<code>$nonmemData</code> item:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mod</span><span class="op">$</span><span class="va">nonmemData</span><span class="op">)</span> <span class="co"># with nlme loaded you can also use getData(mod)</span></span>
<span><span class="co">#&gt;   ID TIME     DV   LNDV MDV    AMT EVID   DOSE   V1I  CLI   QI   V2I SSX IIX SD</span></span>
<span><span class="co">#&gt; 1  1 0.00    0.0 0.0000   1 120000    1 120000 101.5 3.57 6.99 59.19  99   0  1</span></span>
<span><span class="co">#&gt; 2  1 0.25 1040.7 6.9476   0      0    0 120000 101.5 3.57 6.99 59.19  99   0  1</span></span>
<span><span class="co">#&gt; 3  1 0.50 1629.0 7.3957   0      0    0 120000 101.5 3.57 6.99 59.19  99   0  1</span></span>
<span><span class="co">#&gt; 4  1 0.75  877.8 6.7774   0      0    0 120000 101.5 3.57 6.99 59.19  99   0  1</span></span>
<span><span class="co">#&gt; 5  1 1.00 1247.2 7.1286   0      0    0 120000 101.5 3.57 6.99 59.19  99   0  1</span></span>
<span><span class="co">#&gt; 6  1 1.50 1225.1 7.1107   0      0    0 120000 101.5 3.57 6.99 59.19  99   0  1</span></span>
<span><span class="co">#&gt;   CMT</span></span>
<span><span class="co">#&gt; 1   1</span></span>
<span><span class="co">#&gt; 2   1</span></span>
<span><span class="co">#&gt; 3   1</span></span>
<span><span class="co">#&gt; 4   1</span></span>
<span><span class="co">#&gt; 5   1</span></span>
<span><span class="co">#&gt; 6   1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="comparing-visually">Comparing visually<a class="anchor" aria-label="anchor" href="#comparing-visually"></a>
</h2>
<p>The easiest way to visually compare the differences is by the plot
method:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span> <span class="co"># for general plot</span></span></code></pre></div>
<p><img src="rxode2-validate_files/figure-html/plot-1.png" width="700"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you can also see individual comparisons</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span>, log<span class="op">=</span><span class="st">"y"</span>, ncol<span class="op">=</span><span class="fl">2</span>, nrow<span class="op">=</span><span class="fl">2</span>,</span>
<span>     xlab<span class="op">=</span><span class="st">"Time (hr)"</span>, ylab<span class="op">=</span><span class="st">"Concentrations"</span>,</span>
<span>     page<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="rxode2-validate_files/figure-html/plot-2.png" width="700"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># If you want all pages you could use:</span></span>
<span><span class="co">#</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span>, log<span class="op">=</span><span class="st">"y"</span>, ncol<span class="op">=</span><span class="fl">2</span>, nrow<span class="op">=</span><span class="fl">2</span>,</span>
<span>     xlab<span class="op">=</span><span class="st">"Time (hr)"</span>, ylab<span class="op">=</span><span class="st">"Concentrations"</span>,</span>
<span>     page<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="rxode2-validate_files/figure-html/plot-3.png" width="700"><img src="rxode2-validate_files/figure-html/plot-4.png" width="700"><img src="rxode2-validate_files/figure-html/plot-5.png" width="700"><img src="rxode2-validate_files/figure-html/plot-6.png" width="700"><img src="rxode2-validate_files/figure-html/plot-7.png" width="700"><img src="rxode2-validate_files/figure-html/plot-8.png" width="700"><img src="rxode2-validate_files/figure-html/plot-9.png" width="700"><img src="rxode2-validate_files/figure-html/plot-10.png" width="700"><img src="rxode2-validate_files/figure-html/plot-11.png" width="700"><img src="rxode2-validate_files/figure-html/plot-12.png" width="700"><img src="rxode2-validate_files/figure-html/plot-13.png" width="700"><img src="rxode2-validate_files/figure-html/plot-14.png" width="700"><img src="rxode2-validate_files/figure-html/plot-15.png" width="700"><img src="rxode2-validate_files/figure-html/plot-16.png" width="700"><img src="rxode2-validate_files/figure-html/plot-17.png" width="700"><img src="rxode2-validate_files/figure-html/plot-18.png" width="700"><img src="rxode2-validate_files/figure-html/plot-19.png" width="700"><img src="rxode2-validate_files/figure-html/plot-20.png" width="700"><img src="rxode2-validate_files/figure-html/plot-21.png" width="700"><img src="rxode2-validate_files/figure-html/plot-22.png" width="700"><img src="rxode2-validate_files/figure-html/plot-23.png" width="700"><img src="rxode2-validate_files/figure-html/plot-24.png" width="700"><img src="rxode2-validate_files/figure-html/plot-25.png" width="700"><img src="rxode2-validate_files/figure-html/plot-26.png" width="700"><img src="rxode2-validate_files/figure-html/plot-27.png" width="700"><img src="rxode2-validate_files/figure-html/plot-28.png" width="700"><img src="rxode2-validate_files/figure-html/plot-29.png" width="700"><img src="rxode2-validate_files/figure-html/plot-30.png" width="700"><img src="rxode2-validate_files/figure-html/plot-31.png" width="700"><img src="rxode2-validate_files/figure-html/plot-32.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="notes-on-validation">Notes on validation<a class="anchor" aria-label="anchor" href="#notes-on-validation"></a>
</h2>
<p>The validation of the model uses the best data available for NONMEM
estimates. This is:</p>
<ul>
<li>
<code>theta</code> or population parameters</li>
<li>
<code>eta</code> or individual parameters</li>
</ul>
<p>The <code>omega</code> and <code>sigma</code> matrices are captured.
When the nlmixr2 model is fully qualified, the <code>IWRES</code>
validation ensures the residual errors are specified correctly.
Otherwise <code>omega</code> and <code>sigma</code> values do not
contribute to the validation. Also the overall covariance is captured,
but not used in the validation.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Matthew Fidler.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
