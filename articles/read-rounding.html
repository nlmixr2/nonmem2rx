<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Reading rounding from NONMEM • nonmem2rx</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reading rounding from NONMEM">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nonmem2rx</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-converting" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-arrow-right"></span> Converting</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-converting">
<li><a class="dropdown-item" href="../articles/import-nonmem.html">Converting NONMEM to rxode2 model</a></li>
    <li><a class="dropdown-item" href="../articles/convert-nlmixr2.html">Converting NONMEM to nlmixr2 object</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/rxode2-validate.html"><span class="fa fa-check"></span> Qualify</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-simulation" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-dice"></span> Simulation</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-simulation">
<li><a class="dropdown-item" href="../articles/simulate-new-dosing.html">New Dosing Scenarios</a></li>
    <li><a class="dropdown-item" href="../articles/simulate-uncertainty.html">Simulating with Uncertainty</a></li>
    <li><a class="dropdown-item" href="../articles/simulate-extra-items.html">Simulating with Derived Variables</a></li>
    <li><a class="dropdown-item" href="../articles/simulate-new-dosing-with-covs.html">Simulating with Covariates/Input PK parameters</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reporting" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reporting</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reporting">
<li><a class="dropdown-item" href="../articles/create-office.html">Creating word and powerpoint documents</a></li>
    <li><a class="dropdown-item" href="../articles/create-vpc.html">Easily create VPC plots</a></li>
    <li><a class="dropdown-item" href="../articles/create-augPred.html">Create enriched Individual plots</a></li>
  </ul>
</li>
<li class="active nav-item"><a class="nav-link" href="../articles/read-rounding.html"><span class="fa fa-bug"></span> Debug</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-code-o"></span> Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fas fa-rss"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nlmixr2/nonmem2rx/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Reading rounding from NONMEM</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nlmixr2/nonmem2rx/blob/main/vignettes/articles/read-rounding.Rmd" class="external-link"><code>vignettes/articles/read-rounding.Rmd</code></a></small>
      <div class="d-none name"><code>read-rounding.Rmd</code></div>
    </div>

    
    
<p>One of the things that can be helpful is reading NONMEM with rounding
errors.</p>
<p>For this example we will take some of the test examples from
<code>babelmixr2</code> to translate to show examples of rounding errors
that can be read in to help diagnose what could be happening with the
model.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nlmixr2.github.io/nonmem2rx/" class="external-link">nonmem2rx</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nlmixr2.github.io/babelmixr2/" class="external-link">babelmixr2</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: nlmixr2</span></span>
<span><span class="co">#&gt; Loading required package: nlmixr2data</span></span></code></pre></div>
<div class="section level2">
<h2 id="step-1-have-a-nonmem-model-with-rounding-errors-and--phi-or-other-information-about-the-etas">Step 1: Have a NONMEM model with rounding errors (and
<code>.phi</code> or other information about the <code>etas</code>)<a class="anchor" aria-label="anchor" href="#step-1-have-a-nonmem-model-with-rounding-errors-and--phi-or-other-information-about-the-etas"></a>
</h2>
<p>The first step is to load a model with rounding errors using
<code><a href="../reference/nonmem2rx.html">nonmem2rx()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Unzip example with rounding error</span></span>
<span><span class="co"># included, but can be accessed with nlmixr2</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># unzip(system.file("tests/testthat/pk.turnover.emax3-nonmem.zip", package="babelmixr2"))</span></span>
<span><span class="co"># Load the model with `nonmem2rx`:</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nonmem2rx.html">nonmem2rx</a></span><span class="op">(</span><span class="st">"pk.turnover.emax3-nonmem/pk.turnover.emax3.nmctl"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> getting information from  'pk.turnover.emax3-nonmem/pk.turnover.emax3.nmctl'</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> reading in xml file</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> reading in ext file</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> reading in phi file</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> reading in lst file</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> abbreviated list parsing</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> splitting control stream by records</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $INPUT</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $MODEL</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $gTHETA</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $OMEGA</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $SIGMA</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $PROBLEM</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $DATA</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $SUBROUTINES</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $PK</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $DES</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $ERROR</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $ESTIMATION</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ignore record $ESTIMATION</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $COVARIANCE</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ignore record $COVARIANCE</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Processing record $TABLE</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta1` to `6.24053043162953e-07`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta2` to `-3.00642760553675e-06`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta3` to `-2.00405074386117`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta4` to `2.05188410700476`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta5` to `0.0985804613565218`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta6` to `0.511625249037084`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta7` to `6.4184983102259`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta8` to `0.140763261319656`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta9` to `-2.9534704318737`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta10` to `4.57045413136592`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta11` to `3.71714384851537`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta1` to `0.558129815059436`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta2` to `0.558402321309217`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta3` to `0.0785849119252598`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta4` to `0.0508226905750953`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta5` to `5e-05`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta6` to `0.18426809257979`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta7` to `0.0083631531443303`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta8` to `0.00274561514766752`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> read in nonmem input data (for model validation): /home/runner/work/nonmem2rx/nonmem2rx/vignettes/articles/pk.turnover.emax3-nonmem/pk.turnover.emax3.csv</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> ignoring lines that begin with a letter (IGNORE=@)'</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> applying names specified by $INPUT</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> renaming 'dvid' to 'nmdvid'</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> read in nonmem IPRED data (for model validation): /home/runner/work/nonmem2rx/nonmem2rx/vignettes/articles/pk.turnover.emax3-nonmem/pk.turnover.emax3.pred</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> changing most variables to lower case</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> replace theta names</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> replace eta names</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> renaming compartments</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> solving ipred problem</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> solving pred problem</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="va">mod</span></span>
<span><span class="co">#&gt;  <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">rxode2-based free-form 4-cmt ODE model</span> <span style="color: #00BBBB;">──────────────────────────────────────</span> </span></span>
<span><span class="co">#&gt;  ── <span style="font-weight: bold;">Initalization:</span> ──  </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Fixed Effects</span> (<span style="color: #0000BB; font-weight: bold;">$theta</span>): </span></span>
<span><span class="co">#&gt;          tktr           tka           tcl            tv      prop.err </span></span>
<span><span class="co">#&gt;  6.240530e-07 -3.006428e-06 -2.004051e+00  2.051884e+00  9.858046e-02 </span></span>
<span><span class="co">#&gt;     pkadd.err         temax         tec50         tkout           te0 </span></span>
<span><span class="co">#&gt;  5.116252e-01  6.418498e+00  1.407633e-01 -2.953470e+00  4.570454e+00 </span></span>
<span><span class="co">#&gt;     pdadd.err </span></span>
<span><span class="co">#&gt;  3.717144e+00 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Omega</span> (<span style="color: #0000BB; font-weight: bold;">$omega</span>): </span></span>
<span><span class="co">#&gt;            eta.ktr    eta.ka     eta.cl      eta.v eta.emax  eta.ec50</span></span>
<span><span class="co">#&gt; eta.ktr  0.5581298 0.0000000 0.00000000 0.00000000    0e+00 0.0000000</span></span>
<span><span class="co">#&gt; eta.ka   0.0000000 0.5584023 0.00000000 0.00000000    0e+00 0.0000000</span></span>
<span><span class="co">#&gt; eta.cl   0.0000000 0.0000000 0.07858491 0.00000000    0e+00 0.0000000</span></span>
<span><span class="co">#&gt; eta.v    0.0000000 0.0000000 0.00000000 0.05082269    0e+00 0.0000000</span></span>
<span><span class="co">#&gt; eta.emax 0.0000000 0.0000000 0.00000000 0.00000000    5e-05 0.0000000</span></span>
<span><span class="co">#&gt; eta.ec50 0.0000000 0.0000000 0.00000000 0.00000000    0e+00 0.1842681</span></span>
<span><span class="co">#&gt; eta.kout 0.0000000 0.0000000 0.00000000 0.00000000    0e+00 0.0000000</span></span>
<span><span class="co">#&gt; eta.e0   0.0000000 0.0000000 0.00000000 0.00000000    0e+00 0.0000000</span></span>
<span><span class="co">#&gt;             eta.kout      eta.e0</span></span>
<span><span class="co">#&gt; eta.ktr  0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.ka   0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.cl   0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.v    0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.emax 0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.ec50 0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.kout 0.008363153 0.000000000</span></span>
<span><span class="co">#&gt; eta.e0   0.000000000 0.002745615</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co"><span style="font-weight: bold;">#&gt; States</span> (<span style="color: #0000BB; font-weight: bold;">$state</span> or <span style="color: #0000BB; font-weight: bold;">$stateDf</span>): </span></span>
<span><span class="co">#&gt;   Compartment Number Compartment Name</span></span>
<span><span class="co">#&gt; 1                  1            DEPOT</span></span>
<span><span class="co">#&gt; 2                  2              GUT</span></span>
<span><span class="co">#&gt; 3                  3           CENTER</span></span>
<span><span class="co">#&gt; 4                  4           EFFECT</span></span>
<span><span class="co">#&gt;  ── <span style="font-weight: bold;">Model (Normalized Syntax):</span> ── </span></span>
<span><span class="co">#&gt; function() {</span></span>
<span><span class="co">#&gt;     description &lt;- c("translated from babelmixr2", "; comments show mu referenced model in ui$getSplitMuModel")</span></span>
<span><span class="co">#&gt;     dfObs &lt;- 483</span></span>
<span><span class="co">#&gt;     dfSub &lt;- 32</span></span>
<span><span class="co">#&gt;     sigma &lt;- lotri({</span></span>
<span><span class="co">#&gt;         eps1 ~ 1</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt;     validation &lt;- c("IPRED relative difference compared to Nonmem IPRED: 0%; 95% percentile: (0%,0%); rtol=6.13e-06", </span></span>
<span><span class="co">#&gt;         "IPRED absolute difference compared to Nonmem IPRED: 95% percentile: (3.12e-06, 0.000497); atol=6.17e-05", </span></span>
<span><span class="co">#&gt;         "PRED relative difference compared to Nonmem PRED: 0%; 95% percentile: (0%,0%); rtol=6.18e-06", </span></span>
<span><span class="co">#&gt;         "PRED absolute difference compared to Nonmem PRED: 95% percentile: (3.79e-07,0.00313) atol=6.18e-06")</span></span>
<span><span class="co">#&gt;     ini({</span></span>
<span><span class="co">#&gt;         tktr &lt;- 6.24053043162953e-07</span></span>
<span><span class="co">#&gt;         label("1 - tktr")</span></span>
<span><span class="co">#&gt;         tka &lt;- -3.00642760553675e-06</span></span>
<span><span class="co">#&gt;         label("2 - tka")</span></span>
<span><span class="co">#&gt;         tcl &lt;- -2.00405074386117</span></span>
<span><span class="co">#&gt;         label("3 - tcl")</span></span>
<span><span class="co">#&gt;         tv &lt;- 2.05188410700476</span></span>
<span><span class="co">#&gt;         label("4 - tv")</span></span>
<span><span class="co">#&gt;         prop.err &lt;- c(0, 0.0985804613565218)</span></span>
<span><span class="co">#&gt;         label("5 - prop.err")</span></span>
<span><span class="co">#&gt;         pkadd.err &lt;- c(0, 0.511625249037084)</span></span>
<span><span class="co">#&gt;         label("6 - pkadd.err")</span></span>
<span><span class="co">#&gt;         temax &lt;- 6.4184983102259</span></span>
<span><span class="co">#&gt;         label("7 - temax")</span></span>
<span><span class="co">#&gt;         tec50 &lt;- 0.140763261319656</span></span>
<span><span class="co">#&gt;         label("8 - tec50")</span></span>
<span><span class="co">#&gt;         tkout &lt;- -2.9534704318737</span></span>
<span><span class="co">#&gt;         label("9 - tkout")</span></span>
<span><span class="co">#&gt;         te0 &lt;- 4.57045413136592</span></span>
<span><span class="co">#&gt;         label("10 - te0")</span></span>
<span><span class="co">#&gt;         pdadd.err &lt;- c(0, 3.71714384851537)</span></span>
<span><span class="co">#&gt;         label("11 - pdadd.err")</span></span>
<span><span class="co">#&gt;         eta.ktr ~ 0.558129815059436</span></span>
<span><span class="co">#&gt;         eta.ka ~ 0.558402321309217</span></span>
<span><span class="co">#&gt;         eta.cl ~ 0.0785849119252598</span></span>
<span><span class="co">#&gt;         eta.v ~ 0.0508226905750953</span></span>
<span><span class="co">#&gt;         eta.emax ~ 5e-05</span></span>
<span><span class="co">#&gt;         eta.ec50 ~ 0.18426809257979</span></span>
<span><span class="co">#&gt;         eta.kout ~ 0.0083631531443303</span></span>
<span><span class="co">#&gt;         eta.e0 ~ 0.00274561514766752</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt;     model({</span></span>
<span><span class="co">#&gt;         cmt(DEPOT)</span></span>
<span><span class="co">#&gt;         cmt(GUT)</span></span>
<span><span class="co">#&gt;         cmt(CENTER)</span></span>
<span><span class="co">#&gt;         cmt(EFFECT)</span></span>
<span><span class="co">#&gt;         mu_1 &lt;- tktr</span></span>
<span><span class="co">#&gt;         mu_2 &lt;- tka</span></span>
<span><span class="co">#&gt;         mu_3 &lt;- tcl</span></span>
<span><span class="co">#&gt;         mu_4 &lt;- tv</span></span>
<span><span class="co">#&gt;         mu_5 &lt;- temax</span></span>
<span><span class="co">#&gt;         mu_6 &lt;- tec50</span></span>
<span><span class="co">#&gt;         mu_7 &lt;- tkout</span></span>
<span><span class="co">#&gt;         mu_8 &lt;- te0</span></span>
<span><span class="co">#&gt;         ktr &lt;- exp(mu_1 + eta.ktr)</span></span>
<span><span class="co">#&gt;         ka &lt;- exp(mu_2 + eta.ka)</span></span>
<span><span class="co">#&gt;         cl &lt;- exp(mu_3 + eta.cl)</span></span>
<span><span class="co">#&gt;         v &lt;- exp(mu_4 + eta.v)</span></span>
<span><span class="co">#&gt;         emax &lt;- ((1) - (0)) * (1/(1 + exp(-(mu_5 + eta.emax)))) + </span></span>
<span><span class="co">#&gt;             (0)</span></span>
<span><span class="co">#&gt;         ec50 &lt;- exp(mu_6 + eta.ec50)</span></span>
<span><span class="co">#&gt;         kout &lt;- exp(mu_7 + eta.kout)</span></span>
<span><span class="co">#&gt;         e0 &lt;- exp(mu_8 + eta.e0)</span></span>
<span><span class="co">#&gt;         rxini.rxddta4. &lt;- e0</span></span>
<span><span class="co">#&gt;         EFFECT(0) &lt;- rxini.rxddta4.</span></span>
<span><span class="co">#&gt;         dcp &lt;- CENTER/v</span></span>
<span><span class="co">#&gt;         rxdz001 &lt;- (ec50 + dcp)</span></span>
<span><span class="co">#&gt;         if (rxdz001 &gt;= 0 &amp;&amp; rxdz001 &lt;= 1e-06) {</span></span>
<span><span class="co">#&gt;             rxdz001 &lt;- 1e-06</span></span>
<span><span class="co">#&gt;         }</span></span>
<span><span class="co">#&gt;         if (rxdz001 &gt;= -1e-06 &amp;&amp; rxdz001 &lt; 0) {</span></span>
<span><span class="co">#&gt;             rxdz001 &lt;- -1e-06</span></span>
<span><span class="co">#&gt;         }</span></span>
<span><span class="co">#&gt;         pd &lt;- 1 - emax * dcp/rxdz001</span></span>
<span><span class="co">#&gt;         kin &lt;- e0 * kout</span></span>
<span><span class="co">#&gt;         d/dt(DEPOT) &lt;- -ktr * DEPOT</span></span>
<span><span class="co">#&gt;         d/dt(GUT) &lt;- ktr * DEPOT - ka * GUT</span></span>
<span><span class="co">#&gt;         d/dt(CENTER) &lt;- ka * GUT - cl/v * CENTER</span></span>
<span><span class="co">#&gt;         d/dt(EFFECT) &lt;- kin * pd - kout * EFFECT</span></span>
<span><span class="co">#&gt;         cp &lt;- CENTER/v</span></span>
<span><span class="co">#&gt;         f &lt;- DEPOT</span></span>
<span><span class="co">#&gt;         rxe_dcp &lt;- CENTER/v</span></span>
<span><span class="co">#&gt;         rxdze001 &lt;- (ec50 + rxe_dcp)</span></span>
<span><span class="co">#&gt;         if (rxdze001 &gt;= 0 &amp;&amp; rxdze001 &lt;= 1e-06) {</span></span>
<span><span class="co">#&gt;             rxdze001 &lt;- 1e-06</span></span>
<span><span class="co">#&gt;         }</span></span>
<span><span class="co">#&gt;         if (rxdze001 &gt;= -1e-06 &amp;&amp; rxdze001 &lt; 0) {</span></span>
<span><span class="co">#&gt;             rxdze001 &lt;- -1e-06</span></span>
<span><span class="co">#&gt;         }</span></span>
<span><span class="co">#&gt;         rxe_pd &lt;- 1 - emax * rxe_dcp/rxdze001</span></span>
<span><span class="co">#&gt;         rxe_kin &lt;- e0 * kout</span></span>
<span><span class="co">#&gt;         rxe_cp &lt;- CENTER/v</span></span>
<span><span class="co">#&gt;         rx_pf1 &lt;- rxe_cp</span></span>
<span><span class="co">#&gt;         rx_pf2 &lt;- EFFECT</span></span>
<span><span class="co">#&gt;         rx_ip1 &lt;- rx_pf1</span></span>
<span><span class="co">#&gt;         rx_p1 &lt;- rx_ip1</span></span>
<span><span class="co">#&gt;         w1 &lt;- sqrt((pkadd.err)^2 + (rx_pf1)^2 * (prop.err)^2)</span></span>
<span><span class="co">#&gt;         if (w1 == 0) </span></span>
<span><span class="co">#&gt;             w1 &lt;- 1</span></span>
<span><span class="co">#&gt;         rx_ip2 &lt;- rx_pf2</span></span>
<span><span class="co">#&gt;         rx_p2 &lt;- rx_ip2</span></span>
<span><span class="co">#&gt;         w2 &lt;- sqrt((pdadd.err)^2)</span></span>
<span><span class="co">#&gt;         if (w2 == 0) </span></span>
<span><span class="co">#&gt;             w2 &lt;- 1</span></span>
<span><span class="co">#&gt;         ipred &lt;- rx_ip1</span></span>
<span><span class="co">#&gt;         w &lt;- w1</span></span>
<span><span class="co">#&gt;         if (nmdvid == 2) {</span></span>
<span><span class="co">#&gt;             ipred &lt;- rx_ip2</span></span>
<span><span class="co">#&gt;             w &lt;- w2</span></span>
<span><span class="co">#&gt;         }</span></span>
<span><span class="co">#&gt;         y &lt;- ipred + w * eps1</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt;  ── <span style="font-weight: bold;">nonmem2rx translation notes (</span><span style="color: #0000BB; font-weight: bold;">$notes</span><span style="font-weight: bold;">):</span> ──  </span></span>
<span><span class="co">#&gt;    • some etas defaulted to non-mu referenced, possible parsing error: eta.emax as a work-around try putting the mu-referenced expression on a simple line </span></span>
<span><span class="co">#&gt;    • some etas defaulted to non-mu referenced, possible parsing error: eta5 as a work-around try putting the mu-referenced expression on a simple line </span></span>
<span><span class="co">#&gt;    • some NONMEM input has tied times; they are offset by a small offset </span></span>
<span><span class="co">#&gt;    • is.na() applied to non-(list or vector) of type 'language' </span></span>
<span><span class="co">#&gt;    • 'dvid' variable has special meaning in rxode2, renamed to 'nmdvid', rename/copy in your data too </span></span>
<span><span class="co">#&gt;    • $MODEL NCOMPARTMENTS/NEQUILIBRIUM/NPARAMETERS statement(s) ignored </span></span>
<span><span class="co">#&gt;  ── <span style="font-weight: bold;">nonmem2rx extra properties:</span> ──  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Sigma</span> (<span style="color: #0000BB; font-weight: bold;">$sigma</span>): </span></span>
<span><span class="co">#&gt;      eps1</span></span>
<span><span class="co">#&gt; eps1    1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; other properties include: <span style="color: #0000BB; font-weight: bold;">$nonmemData</span>, <span style="color: #0000BB; font-weight: bold;">$etaData</span></span></span>
<span><span class="co">#&gt; captured NONMEM table outputs: <span style="color: #0000BB; font-weight: bold;">$predData</span>, <span style="color: #0000BB; font-weight: bold;">$ipredData</span></span></span>
<span><span class="co">#&gt; NONMEM/rxode2 comparison data: <span style="color: #0000BB; font-weight: bold;">$iwresCompare</span>, <span style="color: #0000BB; font-weight: bold;">$predCompare</span>, <span style="color: #0000BB; font-weight: bold;">$ipredCompare</span></span></span>
<span><span class="co">#&gt; NONMEM/rxode2 composite comparison: <span style="color: #0000BB; font-weight: bold;">$predAtol</span>, <span style="color: #0000BB; font-weight: bold;">$predRtol</span>, <span style="color: #0000BB; font-weight: bold;">$ipredAtol</span>, <span style="color: #0000BB; font-weight: bold;">$ipredRtol</span>, <span style="color: #0000BB; font-weight: bold;">$iwresAtol</span>, <span style="color: #0000BB; font-weight: bold;">$iwresRtol</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-2-convert-rxode2-model-to-model-with-endpointsresiduals-specified-like-nlmixr2">Step 2: Convert <code>rxode2</code> model to model with
endpoints/residuals specified like <code>nlmixr2</code><a class="anchor" aria-label="anchor" href="#step-2-convert-rxode2-model-to-model-with-endpointsresiduals-specified-like-nlmixr2"></a>
</h2>
<p>This example has rounding errors and isn’t a fully qualified
<code>nlmixr2</code> model (even though it was generated from
<code>nlmixr2</code>).</p>
<p>We can use the model and create an equivalent model with
<code><a href="../reference/as.nonmem2rx.html">as.nonmem2rx()</a></code></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://nlmixr2.github.io/rxode2/reference/ini.html" class="external-link">ini</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="va">tktr</span> <span class="op">&lt;-</span> <span class="fl">6.24053043162953e-07</span></span>
<span>    <span class="fu">label</span><span class="op">(</span><span class="st">"1 - tktr"</span><span class="op">)</span></span>
<span>    <span class="va">tka</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">3.00642760553675e-06</span></span>
<span>    <span class="fu">label</span><span class="op">(</span><span class="st">"2 - tka"</span><span class="op">)</span></span>
<span>    <span class="va">tcl</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">2.00405074386117</span></span>
<span>    <span class="fu">label</span><span class="op">(</span><span class="st">"3 - tcl"</span><span class="op">)</span></span>
<span>    <span class="va">tv</span> <span class="op">&lt;-</span> <span class="fl">2.05188410700476</span></span>
<span>    <span class="fu">label</span><span class="op">(</span><span class="st">"4 - tv"</span><span class="op">)</span></span>
<span>    <span class="va">prop.err</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.0985804613565218</span><span class="op">)</span></span>
<span>    <span class="fu">label</span><span class="op">(</span><span class="st">"5 - prop.err"</span><span class="op">)</span></span>
<span>    <span class="va">pkadd.err</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.511625249037084</span><span class="op">)</span></span>
<span>    <span class="fu">label</span><span class="op">(</span><span class="st">"6 - pkadd.err"</span><span class="op">)</span></span>
<span>    <span class="va">temax</span> <span class="op">&lt;-</span> <span class="fl">6.4184983102259</span></span>
<span>    <span class="fu">label</span><span class="op">(</span><span class="st">"7 - temax"</span><span class="op">)</span></span>
<span>    <span class="va">tec50</span> <span class="op">&lt;-</span> <span class="fl">0.140763261319656</span></span>
<span>    <span class="fu">label</span><span class="op">(</span><span class="st">"8 - tec50"</span><span class="op">)</span></span>
<span>    <span class="va">tkout</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">2.9534704318737</span></span>
<span>    <span class="fu">label</span><span class="op">(</span><span class="st">"9 - tkout"</span><span class="op">)</span></span>
<span>    <span class="va">te0</span> <span class="op">&lt;-</span> <span class="fl">4.57045413136592</span></span>
<span>    <span class="fu">label</span><span class="op">(</span><span class="st">"10 - te0"</span><span class="op">)</span></span>
<span>    <span class="va">pdadd.err</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3.71714384851537</span><span class="op">)</span></span>
<span>    <span class="fu">label</span><span class="op">(</span><span class="st">"11 - pdadd.err"</span><span class="op">)</span></span>
<span>    <span class="va">eta.ktr</span> <span class="op">~</span> <span class="fl">0.558129815059436</span></span>
<span>    <span class="va">eta.ka</span> <span class="op">~</span> <span class="fl">0.558402321309217</span></span>
<span>    <span class="va">eta.cl</span> <span class="op">~</span> <span class="fl">0.0785849119252598</span></span>
<span>    <span class="va">eta.v</span> <span class="op">~</span> <span class="fl">0.0508226905750953</span></span>
<span>    <span class="va">eta.emax</span> <span class="op">~</span> <span class="fl">5e-05</span></span>
<span>    <span class="va">eta.ec50</span> <span class="op">~</span> <span class="fl">0.18426809257979</span></span>
<span>    <span class="va">eta.kout</span> <span class="op">~</span> <span class="fl">0.0083631531443303</span></span>
<span>    <span class="va">eta.e0</span> <span class="op">~</span> <span class="fl">0.00274561514766752</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://nlmixr2.github.io/rxode2/reference/model.html" class="external-link">model</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu">cmt</span><span class="op">(</span><span class="va">DEPOT</span><span class="op">)</span></span>
<span>    <span class="fu">cmt</span><span class="op">(</span><span class="va">GUT</span><span class="op">)</span></span>
<span>    <span class="fu">cmt</span><span class="op">(</span><span class="va">CENTER</span><span class="op">)</span></span>
<span>    <span class="fu">cmt</span><span class="op">(</span><span class="va">EFFECT</span><span class="op">)</span></span>
<span>    <span class="va">ktr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">tktr</span> <span class="op">+</span> <span class="va">eta.ktr</span><span class="op">)</span></span>
<span>    <span class="va">ka</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">tka</span>   <span class="op">+</span> <span class="va">eta.ka</span><span class="op">)</span></span>
<span>    <span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">tcl</span>   <span class="op">+</span> <span class="va">eta.cl</span><span class="op">)</span></span>
<span>    <span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">tv</span>     <span class="op">+</span> <span class="va">eta.v</span><span class="op">)</span></span>
<span>    <span class="va">emax</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://nlmixr2.github.io/rxode2/reference/logit.html" class="external-link">expit</a></span><span class="op">(</span><span class="va">temax</span> <span class="op">+</span> <span class="va">eta.emax</span><span class="op">)</span> </span>
<span>    <span class="va">ec50</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">tec50</span> <span class="op">+</span> <span class="va">eta.ec50</span><span class="op">)</span></span>
<span>    <span class="va">kout</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">tkout</span> <span class="op">+</span> <span class="va">eta.kout</span><span class="op">)</span></span>
<span>    <span class="va">e0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">te0</span> <span class="op">+</span> <span class="va">eta.e0</span><span class="op">)</span></span>
<span>    <span class="fu">EFFECT</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">e0</span></span>
<span>    <span class="va">dcp</span> <span class="op">&lt;-</span> <span class="va">CENTER</span><span class="op">/</span><span class="va">v</span></span>
<span>    <span class="va">pd</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">emax</span> <span class="op">*</span> <span class="va">dcp</span><span class="op">/</span><span class="op">(</span><span class="va">ec50</span> <span class="op">+</span> <span class="va">dcp</span><span class="op">)</span></span>
<span>    <span class="va">kin</span> <span class="op">&lt;-</span> <span class="va">e0</span> <span class="op">*</span> <span class="va">kout</span></span>
<span>    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">DEPOT</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="va">ktr</span> <span class="op">*</span> <span class="va">DEPOT</span></span>
<span>    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">GUT</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">ktr</span> <span class="op">*</span> <span class="va">DEPOT</span> <span class="op">-</span> <span class="va">ka</span> <span class="op">*</span> <span class="va">GUT</span></span>
<span>    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">CENTER</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">ka</span> <span class="op">*</span> <span class="va">GUT</span> <span class="op">-</span> <span class="va">cl</span><span class="op">/</span><span class="va">v</span> <span class="op">*</span> <span class="va">CENTER</span></span>
<span>    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">EFFECT</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">kin</span> <span class="op">*</span> <span class="va">pd</span> <span class="op">-</span> <span class="va">kout</span> <span class="op">*</span> <span class="va">EFFECT</span></span>
<span>    <span class="va">eff</span> <span class="op">&lt;-</span> <span class="va">EFFECT</span></span>
<span>    <span class="va">dcp</span> <span class="op">~</span> <span class="fu">add</span><span class="op">(</span><span class="va">pkadd.err</span><span class="op">)</span><span class="op">+</span><span class="fu">prop</span><span class="op">(</span><span class="va">prop.err</span><span class="op">)</span></span>
<span>    <span class="va">eff</span> <span class="op">~</span> <span class="fu">add</span><span class="op">(</span><span class="va">pdadd.err</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>In the model above, the following modifications were made:</p>
<ul>
<li><p>The code for protecting for rounding errors was removed</p></li>
<li><p>Endpoints/residual specifications were added</p></li>
<li><p>Duplicate code in NONMEM’s <code>$ERROR</code> block was removed
from imported model</p></li>
<li><p>All the <code>rx</code> and <code>nlmixr</code> prefixed items
were removed from the model. It is possible that not removing these
variables can cause<code>nlmixr2</code> conversion to fail. It is best
practice to remove them completely.</p></li>
</ul>
<p>Also, it is good practice to make sure the model parses correctly
before trying to validate/convert the model. If you find that your model
doesn’t parse correctly it definitely won’t validate (and the error may
not be as easy to track-down).</p>
<p>The first step is to validate if the translation is correct. This is
done below:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as.nonmem2rx.html">as.nonmem2rx</a></span><span class="op">(</span><span class="va">mod</span>, <span class="va">mod2</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> parameter labels from comments are typically ignored in non-interactive mode</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Need to run with the source intact to parse comments</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> copy 'dfSub' to nonmem2rx model</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> copy 'dfObs' to nonmem2rx model</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> merging 'dvid' with nlmixr2 'cmt' definition</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> solving ipred problem</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> solving pred problem</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> done</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">new</span><span class="op">)</span></span>
<span><span class="co">#&gt;  <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">rxode2-based free-form 4-cmt ODE model</span> <span style="color: #00BBBB;">──────────────────────────────────────</span> </span></span>
<span><span class="co">#&gt;  ── <span style="font-weight: bold;">Initalization:</span> ──  </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Fixed Effects</span> (<span style="color: #0000BB; font-weight: bold;">$theta</span>): </span></span>
<span><span class="co">#&gt;          tktr           tka           tcl            tv      prop.err </span></span>
<span><span class="co">#&gt;  6.240530e-07 -3.006428e-06 -2.004051e+00  2.051884e+00  9.858046e-02 </span></span>
<span><span class="co">#&gt;     pkadd.err         temax         tec50         tkout           te0 </span></span>
<span><span class="co">#&gt;  5.116252e-01  6.418498e+00  1.407633e-01 -2.953470e+00  4.570454e+00 </span></span>
<span><span class="co">#&gt;     pdadd.err </span></span>
<span><span class="co">#&gt;  3.717144e+00 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Omega</span> (<span style="color: #0000BB; font-weight: bold;">$omega</span>): </span></span>
<span><span class="co">#&gt;            eta.ktr    eta.ka     eta.cl      eta.v eta.emax  eta.ec50</span></span>
<span><span class="co">#&gt; eta.ktr  0.5581298 0.0000000 0.00000000 0.00000000    0e+00 0.0000000</span></span>
<span><span class="co">#&gt; eta.ka   0.0000000 0.5584023 0.00000000 0.00000000    0e+00 0.0000000</span></span>
<span><span class="co">#&gt; eta.cl   0.0000000 0.0000000 0.07858491 0.00000000    0e+00 0.0000000</span></span>
<span><span class="co">#&gt; eta.v    0.0000000 0.0000000 0.00000000 0.05082269    0e+00 0.0000000</span></span>
<span><span class="co">#&gt; eta.emax 0.0000000 0.0000000 0.00000000 0.00000000    5e-05 0.0000000</span></span>
<span><span class="co">#&gt; eta.ec50 0.0000000 0.0000000 0.00000000 0.00000000    0e+00 0.1842681</span></span>
<span><span class="co">#&gt; eta.kout 0.0000000 0.0000000 0.00000000 0.00000000    0e+00 0.0000000</span></span>
<span><span class="co">#&gt; eta.e0   0.0000000 0.0000000 0.00000000 0.00000000    0e+00 0.0000000</span></span>
<span><span class="co">#&gt;             eta.kout      eta.e0</span></span>
<span><span class="co">#&gt; eta.ktr  0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.ka   0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.cl   0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.v    0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.emax 0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.ec50 0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.kout 0.008363153 0.000000000</span></span>
<span><span class="co">#&gt; eta.e0   0.000000000 0.002745615</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co"><span style="font-weight: bold;">#&gt; States</span> (<span style="color: #0000BB; font-weight: bold;">$state</span> or <span style="color: #0000BB; font-weight: bold;">$stateDf</span>): </span></span>
<span><span class="co">#&gt;   Compartment Number Compartment Name</span></span>
<span><span class="co">#&gt; 1                  1            DEPOT</span></span>
<span><span class="co">#&gt; 2                  2              GUT</span></span>
<span><span class="co">#&gt; 3                  3           CENTER</span></span>
<span><span class="co">#&gt; 4                  4           EFFECT</span></span>
<span><span class="co">#&gt;  ── <span style="font-weight: bold;">Multiple Endpoint Model (</span><span style="color: #0000BB; font-weight: bold;">$multipleEndpoint</span><span style="font-weight: bold;">):</span> ──  </span></span>
<span><span class="co">#&gt;   variable                cmt                dvid*</span></span>
<span><span class="co">#&gt; 1  dcp ~ … cmt='dcp' or cmt=5 dvid='dcp' or dvid=1</span></span>
<span><span class="co">#&gt; 2  eff ~ … cmt='eff' or cmt=6 dvid='eff' or dvid=2</span></span>
<span><span class="co">#&gt;   * If dvids are outside this range, all dvids are re-numered sequentially, ie 1,7, 10 becomes 1,2,3 etc</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ── <span style="font-weight: bold;">μ-referencing (</span><span style="color: #0000BB; font-weight: bold;">$muRefTable</span><span style="font-weight: bold;">):</span> ──  </span></span>
<span><span class="co">#&gt;   theta      eta level</span></span>
<span><span class="co">#&gt; 1  tktr  eta.ktr    id</span></span>
<span><span class="co">#&gt; 2   tka   eta.ka    id</span></span>
<span><span class="co">#&gt; 3   tcl   eta.cl    id</span></span>
<span><span class="co">#&gt; 4    tv    eta.v    id</span></span>
<span><span class="co">#&gt; 5 temax eta.emax    id</span></span>
<span><span class="co">#&gt; 6 tec50 eta.ec50    id</span></span>
<span><span class="co">#&gt; 7 tkout eta.kout    id</span></span>
<span><span class="co">#&gt; 8   te0   eta.e0    id</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ── <span style="font-weight: bold;">Model (Normalized Syntax):</span> ── </span></span>
<span><span class="co">#&gt; function() {</span></span>
<span><span class="co">#&gt;     description &lt;- c("translated from babelmixr2", "; comments show mu referenced model in ui$getSplitMuModel")</span></span>
<span><span class="co">#&gt;     dfObs &lt;- 483</span></span>
<span><span class="co">#&gt;     dfSub &lt;- 32</span></span>
<span><span class="co">#&gt;     validation &lt;- c("IPRED relative difference compared to Nonmem IPRED: 0%; 95% percentile: (0%,0%); rtol=6.13e-06", </span></span>
<span><span class="co">#&gt;         "IPRED absolute difference compared to Nonmem IPRED: 95% percentile: (3.12e-06, 0.000497); atol=6.17e-05", </span></span>
<span><span class="co">#&gt;         "PRED relative difference compared to Nonmem PRED: 0%; 95% percentile: (0%,0%); rtol=6.18e-06", </span></span>
<span><span class="co">#&gt;         "PRED absolute difference compared to Nonmem PRED: 95% percentile: (3.79e-07,0.00313) atol=6.18e-06")</span></span>
<span><span class="co">#&gt;     ini({</span></span>
<span><span class="co">#&gt;         tktr &lt;- 6.24053043162953e-07</span></span>
<span><span class="co">#&gt;         label("1 - tktr")</span></span>
<span><span class="co">#&gt;         tka &lt;- -3.00642760553675e-06</span></span>
<span><span class="co">#&gt;         label("2 - tka")</span></span>
<span><span class="co">#&gt;         tcl &lt;- -2.00405074386117</span></span>
<span><span class="co">#&gt;         label("3 - tcl")</span></span>
<span><span class="co">#&gt;         tv &lt;- 2.05188410700476</span></span>
<span><span class="co">#&gt;         label("4 - tv")</span></span>
<span><span class="co">#&gt;         prop.err &lt;- c(0, 0.0985804613565218)</span></span>
<span><span class="co">#&gt;         label("5 - prop.err")</span></span>
<span><span class="co">#&gt;         pkadd.err &lt;- c(0, 0.511625249037084)</span></span>
<span><span class="co">#&gt;         label("6 - pkadd.err")</span></span>
<span><span class="co">#&gt;         temax &lt;- 6.4184983102259</span></span>
<span><span class="co">#&gt;         label("7 - temax")</span></span>
<span><span class="co">#&gt;         tec50 &lt;- 0.140763261319656</span></span>
<span><span class="co">#&gt;         label("8 - tec50")</span></span>
<span><span class="co">#&gt;         tkout &lt;- -2.9534704318737</span></span>
<span><span class="co">#&gt;         label("9 - tkout")</span></span>
<span><span class="co">#&gt;         te0 &lt;- 4.57045413136592</span></span>
<span><span class="co">#&gt;         label("10 - te0")</span></span>
<span><span class="co">#&gt;         pdadd.err &lt;- c(0, 3.71714384851537)</span></span>
<span><span class="co">#&gt;         label("11 - pdadd.err")</span></span>
<span><span class="co">#&gt;         eta.ktr ~ 0.558129815059436</span></span>
<span><span class="co">#&gt;         eta.ka ~ 0.558402321309217</span></span>
<span><span class="co">#&gt;         eta.cl ~ 0.0785849119252598</span></span>
<span><span class="co">#&gt;         eta.v ~ 0.0508226905750953</span></span>
<span><span class="co">#&gt;         eta.emax ~ 5e-05</span></span>
<span><span class="co">#&gt;         eta.ec50 ~ 0.18426809257979</span></span>
<span><span class="co">#&gt;         eta.kout ~ 0.0083631531443303</span></span>
<span><span class="co">#&gt;         eta.e0 ~ 0.00274561514766752</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt;     model({</span></span>
<span><span class="co">#&gt;         cmt(DEPOT)</span></span>
<span><span class="co">#&gt;         cmt(GUT)</span></span>
<span><span class="co">#&gt;         cmt(CENTER)</span></span>
<span><span class="co">#&gt;         cmt(EFFECT)</span></span>
<span><span class="co">#&gt;         ktr &lt;- exp(tktr + eta.ktr)</span></span>
<span><span class="co">#&gt;         ka &lt;- exp(tka + eta.ka)</span></span>
<span><span class="co">#&gt;         cl &lt;- exp(tcl + eta.cl)</span></span>
<span><span class="co">#&gt;         v &lt;- exp(tv + eta.v)</span></span>
<span><span class="co">#&gt;         emax &lt;- expit(temax + eta.emax)</span></span>
<span><span class="co">#&gt;         ec50 &lt;- exp(tec50 + eta.ec50)</span></span>
<span><span class="co">#&gt;         kout &lt;- exp(tkout + eta.kout)</span></span>
<span><span class="co">#&gt;         e0 &lt;- exp(te0 + eta.e0)</span></span>
<span><span class="co">#&gt;         EFFECT(0) &lt;- e0</span></span>
<span><span class="co">#&gt;         dcp &lt;- CENTER/v</span></span>
<span><span class="co">#&gt;         pd &lt;- 1 - emax * dcp/(ec50 + dcp)</span></span>
<span><span class="co">#&gt;         kin &lt;- e0 * kout</span></span>
<span><span class="co">#&gt;         d/dt(DEPOT) &lt;- -ktr * DEPOT</span></span>
<span><span class="co">#&gt;         d/dt(GUT) &lt;- ktr * DEPOT - ka * GUT</span></span>
<span><span class="co">#&gt;         d/dt(CENTER) &lt;- ka * GUT - cl/v * CENTER</span></span>
<span><span class="co">#&gt;         d/dt(EFFECT) &lt;- kin * pd - kout * EFFECT</span></span>
<span><span class="co">#&gt;         eff &lt;- EFFECT</span></span>
<span><span class="co">#&gt;         dcp ~ add(pkadd.err) + prop(prop.err)</span></span>
<span><span class="co">#&gt;         eff ~ add(pdadd.err)</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt;  ── <span style="font-weight: bold;">nonmem2rx extra properties:</span> ──  </span></span>
<span><span class="co">#&gt; other properties include: <span style="color: #0000BB; font-weight: bold;">$nonmemData</span>, <span style="color: #0000BB; font-weight: bold;">$etaData</span>, <span style="color: #0000BB; font-weight: bold;">$thetaMat</span></span></span>
<span><span class="co">#&gt; captured NONMEM table outputs: <span style="color: #0000BB; font-weight: bold;">$predData</span>, <span style="color: #0000BB; font-weight: bold;">$ipredData</span></span></span>
<span><span class="co">#&gt; NONMEM/rxode2 comparison data: <span style="color: #0000BB; font-weight: bold;">$iwresCompare</span>, <span style="color: #0000BB; font-weight: bold;">$predCompare</span>, <span style="color: #0000BB; font-weight: bold;">$ipredCompare</span></span></span>
<span><span class="co">#&gt; NONMEM/rxode2 composite comparison: <span style="color: #0000BB; font-weight: bold;">$predAtol</span>, <span style="color: #0000BB; font-weight: bold;">$predRtol</span>, <span style="color: #0000BB; font-weight: bold;">$ipredAtol</span>, <span style="color: #0000BB; font-weight: bold;">$ipredRtol</span>, <span style="color: #0000BB; font-weight: bold;">$iwresAtol</span>, <span style="color: #0000BB; font-weight: bold;">$iwresRtol</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-3-convert-new-model-to-nlmixr2-fit-with-as-nlmixr2">Step 3: Convert new model to nlmixr2 fit with
<code>as.nlmixr2()</code><a class="anchor" aria-label="anchor" href="#step-3-convert-new-model-to-nlmixr2-fit-with-as-nlmixr2"></a>
</h2>
<p>Once the translation is complete, and it is validated, you can
convert the fit to a full nlmixr2 fit object.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://nlmixr2.github.io/babelmixr2/reference/as.nlmixr2.html" class="external-link">as.nlmixr2</a></span><span class="op">(</span><span class="va">new</span><span class="op">)</span></span>
<span><span class="co">#&gt; → loading into <span style="color: #0000BB;">symengine</span> environment...</span></span>
<span><span class="co">#&gt; → pruning branches (`if`/`else`) of full model...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> done</span></span>
<span><span class="co">#&gt; → finding duplicate expressions in EBE model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → optimizing duplicate expressions in EBE model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → compiling EBE model...</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> done</span></span>
<span><span class="co">#&gt; rxode2 3.0.2.9000 using 2 threads (see ?getRxThreads)</span></span>
<span><span class="co">#&gt;   no cache: create with `rxCreateCache()`</span></span>
<span><span class="co">#&gt; → Calculating residuals/tables</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> done</span></span>
<span><span class="co">#&gt; → compress origData in nlmixr2 object, save 21592</span></span>
<span><span class="co">#&gt; → compress parHistData in nlmixr2 object, save 5536</span></span>
<span></span>
<span><span class="co"># Once it is loaded remove the directory (we don't need the files any</span></span>
<span><span class="co"># more for this example)</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># In this example, we don't remove, but note where it can be removed</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># unlink("pk.turnover.emax3-nonmem", recursive = TRUE)</span></span></code></pre></div>
<p>Note this object <strong>does not</strong> rerun an estimation, but
rather imports everything it knows about the fit to rerun the
<code>nlmixr2</code> table steps to calculate the things you need.</p>
</div>
<div class="section level2">
<h2 id="step-4-explore-the-datafit-as-if-it-came-from-nlmixr2">Step 4: Explore the data/fit as if it came from
<code>nlmixr2</code><a class="anchor" aria-label="anchor" href="#step-4-explore-the-datafit-as-if-it-came-from-nlmixr2"></a>
</h2>
<p>With this information you can see about the properties of the
model:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">── </span><span style="color: #0000BB; font-weight: bold;">nlmix</span><span style="color: #BB0000; font-weight: bold;">r²</span><span style="font-weight: bold;"> </span><span style="color: #BBBB00; font-weight: bold;">nonmem2rx</span><span style="font-weight: bold;"> reading NONMEM ver 7.4.3 ──</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;               OBJF     AIC      BIC Log-likelihood</span></span>
<span><span class="co">#&gt; nonmem2rx 439.2156 1364.91 1444.331      -663.4551</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">── Time (sec </span><span style="color: #0000BB; font-weight: bold;">$time</span><span style="font-weight: bold;">): ──</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;           setup table compress NONMEM as.nlmixr2</span></span>
<span><span class="co">#&gt; elapsed 0.03868 0.078     0.01 320.27       3.71</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">── Population Parameters (</span><span style="color: #0000BB; font-weight: bold;">$parFixed</span><span style="font-weight: bold;"> or </span><span style="color: #0000BB; font-weight: bold;">$parFixedDf</span><span style="font-weight: bold;">): ──</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                <span style="font-weight: bold;">Parameter</span>      <span style="font-weight: bold;">Est.</span> <span style="font-weight: bold;">Back-transformed</span> <span style="font-weight: bold;">BSV(CV% or SD)</span> <span style="font-weight: bold;">Shrink(SD)%</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tktr</span>            1 - <span style="font-weight: bold;">tktr</span>  6.24e-07                1           86.5      <span style="color: #BB0000; font-weight: bold;">59.8%</span> </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tka</span>              2 - <span style="font-weight: bold;">tka</span> -3.01e-06                1           86.5      <span style="color: #BB0000; font-weight: bold;">59.8%</span> </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tcl</span>              3 - <span style="font-weight: bold;">tcl</span>        -2            0.135           28.6      1.34% </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tv</span>                4 - <span style="font-weight: bold;">tv</span>      2.05             7.78           22.8      6.44% </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">prop.err</span>    5 - <span style="font-weight: bold;">prop.err</span>    0.0986           0.0986                           </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">pkadd.err</span>  6 - <span style="font-weight: bold;">pkadd.err</span>     0.512            0.512                           </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">temax</span>          7 - <span style="font-weight: bold;">temax</span>      6.42            0.998        0.00707      <span style="color: #BB0000; font-weight: bold;">100.%</span> </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tec50</span>          8 - <span style="font-weight: bold;">tec50</span>     0.141             1.15           45.0      6.06% </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tkout</span>          9 - <span style="font-weight: bold;">tkout</span>     -2.95           0.0522           9.16      <span style="color: #BB0000; font-weight: bold;">32.4%</span> </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">te0</span>             10 - <span style="font-weight: bold;">te0</span>      4.57             96.6           5.24      18.1% </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">pdadd.err</span> 11 - <span style="font-weight: bold;">pdadd.err</span>      3.72             3.72                           </span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt;   No correlations in between subject variability (BSV) matrix</span></span>
<span><span class="co">#&gt;   Full BSV covariance (<span style="color: #0000BB; font-weight: bold;">$omega</span>) or correlation (<span style="color: #0000BB; font-weight: bold;">$omegaR</span>; diagonals=SDs) </span></span>
<span><span class="co">#&gt;   Distribution stats (mean/skewness/kurtosis/p-value) available in <span style="color: #0000BB; font-weight: bold;">$shrink</span> </span></span>
<span><span class="co">#&gt;   Censoring (<span style="color: #0000BB; font-weight: bold;">$censInformation</span>): No censoring</span></span>
<span><span class="co">#&gt;   Minimization message (<span style="color: #0000BB; font-weight: bold;">$message</span>):  </span></span>
<span><span class="co">#&gt;     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  WARNINGS AND ERRORS (IF ANY) FOR PROBLEM    1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  (WARNING  2) NM-TRAN INFERS THAT THE DATA ARE POPULATION.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     </span></span>
<span><span class="co">#&gt; 0MINIMIZATION TERMINATED</span></span>
<span><span class="co">#&gt;  DUE TO ROUNDING ERRORS (ERROR=134)</span></span>
<span><span class="co">#&gt;  NO. OF FUNCTION EVALUATIONS USED:     1088</span></span>
<span><span class="co">#&gt;  NO. OF SIG. DIGITS UNREPORTABLE</span></span>
<span><span class="co">#&gt; 0PARAMETER ESTIMATE IS NEAR ITS BOUNDARY</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     IPRED relative difference compared to Nonmem IPRED: 0%; 95% percentile: (0%,0%); rtol=5.09e-06</span></span>
<span><span class="co">#&gt;     PRED relative difference compared to Nonmem PRED: 0%; 95% percentile: (0%,0%); rtol=5.29e-06</span></span>
<span><span class="co">#&gt;     IPRED absolute difference compared to Nonmem IPRED: 95% percentile: (2.2e-06, 0.000454); atol=3.03e-05</span></span>
<span><span class="co">#&gt;     PRED absolute difference compared to Nonmem PRED: 95% percentile: (4.72e-07,0.00361); atol=5.29e-06</span></span>
<span><span class="co">#&gt;     there are solving errors during optimization (see '$prderr')</span></span>
<span><span class="co">#&gt;     nonmem2rx model file: 'pk.turnover.emax3-nonmem/pk.turnover.emax3.nmctl' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">── Fit Data (object is a modified </span><span style="color: #0000BB; font-weight: bold;">tibble</span><span style="font-weight: bold;">): ──</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 483 × 35</span></span></span>
<span><span class="co">#&gt;   ID     TIME CMT      DV  PRED   RES IPRED   IRES  IWRES eta.ktr eta.ka eta.cl</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1       0.5 dcp     0    1.16 -<span style="color: #BB0000;">1.16</span> 0.444 -<span style="color: #BB0000;">0.444</span> -<span style="color: #BB0000;">0.864</span>  -<span style="color: #BB0000;">0.506</span> -<span style="color: #BB0000;">0.506</span>  0.699</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1       1   dcp     1.9  3.37 -<span style="color: #BB0000;">1.47</span> 1.45   0.446  0.840  -<span style="color: #BB0000;">0.506</span> -<span style="color: #BB0000;">0.506</span>  0.699</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 1       2   dcp     3.3  7.51 -<span style="color: #BB0000;">4.21</span> 3.96  -<span style="color: #BB0000;">0.660</span> -<span style="color: #BB0000;">1.03</span>   -<span style="color: #BB0000;">0.506</span> -<span style="color: #BB0000;">0.506</span>  0.699</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 480 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 23 more variables: eta.v &lt;dbl&gt;, eta.emax &lt;dbl&gt;, eta.ec50 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   eta.kout &lt;dbl&gt;, eta.e0 &lt;dbl&gt;, dcp &lt;dbl&gt;, eff &lt;dbl&gt;, DEPOT &lt;dbl&gt;, GUT &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   CENTER &lt;dbl&gt;, EFFECT &lt;dbl&gt;, ktr &lt;dbl&gt;, ka &lt;dbl&gt;, cl &lt;dbl&gt;, v &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   emax &lt;dbl&gt;, ec50 &lt;dbl&gt;, kout &lt;dbl&gt;, e0 &lt;dbl&gt;, pd &lt;dbl&gt;, kin &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   tad &lt;dbl&gt;, dosenum &lt;dbl&gt;</span></span></span></code></pre></div>
<p>In this model you can see:</p>
<ul>
<li>High shrinkage in <code>temax</code>, <code>ktr</code>,
<code>ka</code> and moderate shrinkage in <code>kout</code>
</li>
</ul>
<p>By removing these parameters, you could possibly get a successful
NONMEM run.</p>
<p>If you want, you can use model piping to remove these parameters as
follows:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod3</span> <span class="op">&lt;-</span>  <span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://nlmixr2.github.io/rxode2/reference/model.html" class="external-link">model</a></span><span class="op">(</span><span class="va">ktr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">tktr</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://nlmixr2.github.io/rxode2/reference/model.html" class="external-link">model</a></span><span class="op">(</span><span class="va">ka</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">tka</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://nlmixr2.github.io/rxode2/reference/model.html" class="external-link">model</a></span><span class="op">(</span><span class="va">emax</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://nlmixr2.github.io/rxode2/reference/logit.html" class="external-link">expit</a></span><span class="op">(</span><span class="va">temax</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://nlmixr2.github.io/rxode2/reference/model.html" class="external-link">model</a></span><span class="op">(</span><span class="va">kout</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">tkout</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> remove between subject variability `eta.ktr`</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> remove between subject variability `eta.ka`</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> remove between subject variability `eta.emax`</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> remove between subject variability `eta.kout`</span></span>
<span></span>
<span><span class="va">mod3</span></span>
<span><span class="co">#&gt;  <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">rxode2-based free-form 4-cmt ODE model</span> <span style="color: #00BBBB;">──────────────────────────────────────</span> </span></span>
<span><span class="co">#&gt;  ── <span style="font-weight: bold;">Initalization:</span> ──  </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Fixed Effects</span> (<span style="color: #0000BB; font-weight: bold;">$theta</span>): </span></span>
<span><span class="co">#&gt;          tktr           tka           tcl            tv      prop.err </span></span>
<span><span class="co">#&gt;  6.240530e-07 -3.006428e-06 -2.004051e+00  2.051884e+00  9.858046e-02 </span></span>
<span><span class="co">#&gt;     pkadd.err         temax         tec50         tkout           te0 </span></span>
<span><span class="co">#&gt;  5.116252e-01  6.418498e+00  1.407633e-01 -2.953470e+00  4.570454e+00 </span></span>
<span><span class="co">#&gt;     pdadd.err </span></span>
<span><span class="co">#&gt;  3.717144e+00 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Omega</span> (<span style="color: #0000BB; font-weight: bold;">$omega</span>): </span></span>
<span><span class="co">#&gt;              eta.cl      eta.v  eta.ec50      eta.e0</span></span>
<span><span class="co">#&gt; eta.cl   0.07858491 0.00000000 0.0000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.v    0.00000000 0.05082269 0.0000000 0.000000000</span></span>
<span><span class="co">#&gt; eta.ec50 0.00000000 0.00000000 0.1842681 0.000000000</span></span>
<span><span class="co">#&gt; eta.e0   0.00000000 0.00000000 0.0000000 0.002745615</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co"><span style="font-weight: bold;">#&gt; States</span> (<span style="color: #0000BB; font-weight: bold;">$state</span> or <span style="color: #0000BB; font-weight: bold;">$stateDf</span>): </span></span>
<span><span class="co">#&gt;   Compartment Number Compartment Name</span></span>
<span><span class="co">#&gt; 1                  1            DEPOT</span></span>
<span><span class="co">#&gt; 2                  2              GUT</span></span>
<span><span class="co">#&gt; 3                  3           CENTER</span></span>
<span><span class="co">#&gt; 4                  4           EFFECT</span></span>
<span><span class="co">#&gt;  ── <span style="font-weight: bold;">Multiple Endpoint Model (</span><span style="color: #0000BB; font-weight: bold;">$multipleEndpoint</span><span style="font-weight: bold;">):</span> ──  </span></span>
<span><span class="co">#&gt;   variable                cmt                dvid*</span></span>
<span><span class="co">#&gt; 1  dcp ~ … cmt='dcp' or cmt=5 dvid='dcp' or dvid=1</span></span>
<span><span class="co">#&gt; 2  eff ~ … cmt='eff' or cmt=6 dvid='eff' or dvid=2</span></span>
<span><span class="co">#&gt;   * If dvids are outside this range, all dvids are re-numered sequentially, ie 1,7, 10 becomes 1,2,3 etc</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ── <span style="font-weight: bold;">μ-referencing (</span><span style="color: #0000BB; font-weight: bold;">$muRefTable</span><span style="font-weight: bold;">):</span> ──  </span></span>
<span><span class="co">#&gt;   theta      eta level</span></span>
<span><span class="co">#&gt; 1   tcl   eta.cl    id</span></span>
<span><span class="co">#&gt; 2    tv    eta.v    id</span></span>
<span><span class="co">#&gt; 3 tec50 eta.ec50    id</span></span>
<span><span class="co">#&gt; 4   te0   eta.e0    id</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ── <span style="font-weight: bold;">Model (Normalized Syntax):</span> ── </span></span>
<span><span class="co">#&gt; function() {</span></span>
<span><span class="co">#&gt;     description &lt;- c("translated from babelmixr2", "; comments show mu referenced model in ui$getSplitMuModel")</span></span>
<span><span class="co">#&gt;     dfObs &lt;- 483</span></span>
<span><span class="co">#&gt;     dfSub &lt;- 32</span></span>
<span><span class="co">#&gt;     validation &lt;- c("IPRED relative difference compared to Nonmem IPRED: 0%; 95% percentile: (0%,0%); rtol=6.13e-06", </span></span>
<span><span class="co">#&gt;         "IPRED absolute difference compared to Nonmem IPRED: 95% percentile: (3.12e-06, 0.000497); atol=6.17e-05", </span></span>
<span><span class="co">#&gt;         "PRED relative difference compared to Nonmem PRED: 0%; 95% percentile: (0%,0%); rtol=6.18e-06", </span></span>
<span><span class="co">#&gt;         "PRED absolute difference compared to Nonmem PRED: 95% percentile: (3.79e-07,0.00313) atol=6.18e-06")</span></span>
<span><span class="co">#&gt;     ini({</span></span>
<span><span class="co">#&gt;         tktr &lt;- 6.24053043162953e-07</span></span>
<span><span class="co">#&gt;         label("1 - tktr")</span></span>
<span><span class="co">#&gt;         tka &lt;- -3.00642760553675e-06</span></span>
<span><span class="co">#&gt;         label("2 - tka")</span></span>
<span><span class="co">#&gt;         tcl &lt;- -2.00405074386117</span></span>
<span><span class="co">#&gt;         label("3 - tcl")</span></span>
<span><span class="co">#&gt;         tv &lt;- 2.05188410700476</span></span>
<span><span class="co">#&gt;         label("4 - tv")</span></span>
<span><span class="co">#&gt;         prop.err &lt;- c(0, 0.0985804613565218)</span></span>
<span><span class="co">#&gt;         label("5 - prop.err")</span></span>
<span><span class="co">#&gt;         pkadd.err &lt;- c(0, 0.511625249037084)</span></span>
<span><span class="co">#&gt;         label("6 - pkadd.err")</span></span>
<span><span class="co">#&gt;         temax &lt;- 6.4184983102259</span></span>
<span><span class="co">#&gt;         label("7 - temax")</span></span>
<span><span class="co">#&gt;         tec50 &lt;- 0.140763261319656</span></span>
<span><span class="co">#&gt;         label("8 - tec50")</span></span>
<span><span class="co">#&gt;         tkout &lt;- -2.9534704318737</span></span>
<span><span class="co">#&gt;         label("9 - tkout")</span></span>
<span><span class="co">#&gt;         te0 &lt;- 4.57045413136592</span></span>
<span><span class="co">#&gt;         label("10 - te0")</span></span>
<span><span class="co">#&gt;         pdadd.err &lt;- c(0, 3.71714384851537)</span></span>
<span><span class="co">#&gt;         label("11 - pdadd.err")</span></span>
<span><span class="co">#&gt;         eta.cl ~ 0.0785849119252598</span></span>
<span><span class="co">#&gt;         eta.v ~ 0.0508226905750953</span></span>
<span><span class="co">#&gt;         eta.ec50 ~ 0.18426809257979</span></span>
<span><span class="co">#&gt;         eta.e0 ~ 0.00274561514766752</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt;     model({</span></span>
<span><span class="co">#&gt;         cmt(DEPOT)</span></span>
<span><span class="co">#&gt;         cmt(GUT)</span></span>
<span><span class="co">#&gt;         cmt(CENTER)</span></span>
<span><span class="co">#&gt;         cmt(EFFECT)</span></span>
<span><span class="co">#&gt;         ktr &lt;- exp(tktr)</span></span>
<span><span class="co">#&gt;         ka &lt;- exp(tka)</span></span>
<span><span class="co">#&gt;         cl &lt;- exp(tcl + eta.cl)</span></span>
<span><span class="co">#&gt;         v &lt;- exp(tv + eta.v)</span></span>
<span><span class="co">#&gt;         emax &lt;- expit(temax)</span></span>
<span><span class="co">#&gt;         ec50 &lt;- exp(tec50 + eta.ec50)</span></span>
<span><span class="co">#&gt;         kout &lt;- exp(tkout)</span></span>
<span><span class="co">#&gt;         e0 &lt;- exp(te0 + eta.e0)</span></span>
<span><span class="co">#&gt;         EFFECT(0) &lt;- e0</span></span>
<span><span class="co">#&gt;         dcp &lt;- CENTER/v</span></span>
<span><span class="co">#&gt;         pd &lt;- 1 - emax * dcp/(ec50 + dcp)</span></span>
<span><span class="co">#&gt;         kin &lt;- e0 * kout</span></span>
<span><span class="co">#&gt;         d/dt(DEPOT) &lt;- -ktr * DEPOT</span></span>
<span><span class="co">#&gt;         d/dt(GUT) &lt;- ktr * DEPOT - ka * GUT</span></span>
<span><span class="co">#&gt;         d/dt(CENTER) &lt;- ka * GUT - cl/v * CENTER</span></span>
<span><span class="co">#&gt;         d/dt(EFFECT) &lt;- kin * pd - kout * EFFECT</span></span>
<span><span class="co">#&gt;         eff &lt;- EFFECT</span></span>
<span><span class="co">#&gt;         dcp ~ add(pkadd.err) + prop(prop.err)</span></span>
<span><span class="co">#&gt;         eff ~ add(pdadd.err)</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p>Since you have <code>babelmixr2</code> you could use
<code>babelmixr2</code> to run the model for you in NONMEM (if you have
it setup to run NONMEM), or even run the model from <code>nlmixr2</code>
itself. In this example we will choose to use <code>nlmixr2</code>
(since the <code>babelmixr2</code> example runs NONMEM and shows a
reduction in shrinkage)</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://nlmixr2.github.io/nlmixr2est/reference/nlmixr2.html" class="external-link">nlmixr</a></span><span class="op">(</span><span class="va">mod3</span>, <span class="va">new</span><span class="op">$</span><span class="va">nonmemData</span>, <span class="st">"focei"</span>, <span class="fu"><a href="https://nlmixr2.github.io/nlmixr2/reference/foceiControl.html" class="external-link">foceiControl</a></span><span class="op">(</span>print<span class="op">=</span><span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; → loading into <span style="color: #0000BB;">symengine</span> environment...</span></span>
<span><span class="co">#&gt; → pruning branches (`if`/`else`) of full model...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> done</span></span>
<span><span class="co">#&gt; → calculate jacobian</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → calculate sensitivities</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → calculate ∂(f)/∂(η)</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → calculate ∂(R²)/∂(η)</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → finding duplicate expressions in inner model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → optimizing duplicate expressions in inner model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → finding duplicate expressions in EBE model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → optimizing duplicate expressions in EBE model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → compiling inner model...</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> done</span></span>
<span><span class="co">#&gt; → finding duplicate expressions in FD model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → optimizing duplicate expressions in FD model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → compiling EBE model...</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> done</span></span>
<span><span class="co">#&gt; → compiling events FD model...</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> done</span></span>
<span><span class="co">#&gt; calculating covariance matrix</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:33 </span></span>
<span><span class="co">#&gt; done</span></span>
<span><span class="co">#&gt; → Calculating residuals/tables</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> done</span></span>
<span><span class="co">#&gt; → compress origData in nlmixr2 object, save 21592</span></span>
<span><span class="co">#&gt; → compress parHistData in nlmixr2 object, save 14920</span></span>
<span></span>
<span><span class="va">fit2</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">── </span><span style="color: #0000BB; font-weight: bold;">nlmix</span><span style="color: #BB0000; font-weight: bold;">r²</span><span style="font-weight: bold;"> </span><span style="color: #BBBB00; font-weight: bold;">FOCE</span><span style="color: #BB0000; font-weight: bold;">i</span> (outer: nlminb) ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;           OBJF      AIC      BIC Log-likelihood Condition#(Cov) Condition#(Cor)</span></span>
<span><span class="co">#&gt; FOCEi 1425.005 2342.699 2405.399       -1156.35        896101.4        262.0511</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">── Time (sec </span><span style="color: #BBBB00; font-weight: bold;">fit2</span><span style="color: #0000BB; font-weight: bold;">$time</span><span style="font-weight: bold;">): ──</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;            setup optimize covariance table compress    other</span></span>
<span><span class="co">#&gt; elapsed 0.009323 33.49711   33.49711 0.115    0.013 86.51546</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">── Population Parameters (</span><span style="color: #BBBB00; font-weight: bold;">fit2</span><span style="color: #0000BB; font-weight: bold;">$parFixed</span><span style="font-weight: bold;"> or </span><span style="color: #BBBB00; font-weight: bold;">fit2</span><span style="color: #0000BB; font-weight: bold;">$parFixedDf</span><span style="font-weight: bold;">): ──</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                <span style="font-weight: bold;">Parameter</span>   <span style="font-weight: bold;">Est.</span>     <span style="font-weight: bold;">SE</span>  <span style="font-weight: bold;">%RSE</span> <span style="font-weight: bold;">Back-transformed(95%CI)</span> <span style="font-weight: bold;">BSV(CV%)</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tktr</span>            1 - <span style="font-weight: bold;">tktr</span> 0.0978  0.147   150       1.1 (0.827, 1.47)         </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tka</span>              2 - <span style="font-weight: bold;">tka</span> 0.0229 0.0978   427      1.02 (0.845, 1.24)         </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tcl</span>              3 - <span style="font-weight: bold;">tcl</span>  -2.01   0.05  2.49    0.134 (0.122, 0.148)     27.8</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tv</span>                4 - <span style="font-weight: bold;">tv</span>   2.05 0.0425  2.07       7.79 (7.17, 8.47)     22.7</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">prop.err</span>    5 - <span style="font-weight: bold;">prop.err</span>  0.144                                0.144         </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">pkadd.err</span>  6 - <span style="font-weight: bold;">pkadd.err</span>  0.616                                0.616         </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">temax</span>          7 - <span style="font-weight: bold;">temax</span>    188   5.75  3.06                1 (1, 1)         </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tec50</span>          8 - <span style="font-weight: bold;">tec50</span>  0.143 0.0875  61.1      1.15 (0.972, 1.37)     43.0</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tkout</span>          9 - <span style="font-weight: bold;">tkout</span>  -2.96  0.028 0.945 0.0516 (0.0488, 0.0545)         </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">te0</span>             10 - <span style="font-weight: bold;">te0</span>   4.57 0.0105  0.23       96.8 (94.8, 98.8)     5.24</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">pdadd.err</span> 11 - <span style="font-weight: bold;">pdadd.err</span>   3.86                                 3.86         </span></span>
<span><span class="co">#&gt;           <span style="font-weight: bold;">Shrink(SD)%</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tktr</span>                 </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tka</span>                  </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tcl</span>            1.95% </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tv</span>             6.61% </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">prop.err</span>             </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">pkadd.err</span>            </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">temax</span>                </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tec50</span>          7.90% </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tkout</span>                </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">te0</span>            19.4% </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">pdadd.err</span>            </span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt;   Covariance Type (<span style="color: #BBBB00;">fit2</span><span style="color: #0000BB; font-weight: bold;">$covMethod</span>): <span style="font-weight: bold;">|r|,|s|</span></span></span>
<span><span class="co">#&gt;   No correlations in between subject variability (BSV) matrix</span></span>
<span><span class="co">#&gt;   Full BSV covariance (<span style="color: #BBBB00;">fit2</span><span style="color: #0000BB; font-weight: bold;">$omega</span>) or correlation (<span style="color: #BBBB00;">fit2</span><span style="color: #0000BB; font-weight: bold;">$omegaR</span>; diagonals=SDs) </span></span>
<span><span class="co">#&gt;   Distribution stats (mean/skewness/kurtosis/p-value) available in <span style="color: #BBBB00;">fit2</span><span style="color: #0000BB; font-weight: bold;">$shrink</span> </span></span>
<span><span class="co">#&gt;   Information about run found (<span style="color: #BBBB00;">fit2</span><span style="color: #0000BB; font-weight: bold;">$runInfo</span>):</span></span>
<span><span class="co">#&gt;    • gradient problems with initial estimate and covariance; see $scaleInfo </span></span>
<span><span class="co">#&gt;    • since sandwich matrix is corrected, you may compare to $covR or $covS if you wish </span></span>
<span><span class="co">#&gt;    • S matrix non-positive definite but corrected by S = sqrtm(S%*%S) </span></span>
<span><span class="co">#&gt;    • R matrix non-positive definite but corrected by R = sqrtm(R%*%R) </span></span>
<span><span class="co">#&gt;    • last objective function was not at minimum, possible problems in optimization </span></span>
<span><span class="co">#&gt;    • ETAs were reset to zero during optimization; (Can control by foceiControl(resetEtaP=.)) </span></span>
<span><span class="co">#&gt;    • initial ETAs were nudged; (can control by foceiControl(etaNudge=., etaNudge2=)) </span></span>
<span><span class="co">#&gt;   Censoring (<span style="color: #BBBB00;">fit2</span><span style="color: #0000BB; font-weight: bold;">$censInformation</span>): No censoring</span></span>
<span><span class="co">#&gt;   Minimization message (<span style="color: #BBBB00;">fit2</span><span style="color: #0000BB; font-weight: bold;">$message</span>):  </span></span>
<span><span class="co">#&gt;     false convergence (8) </span></span>
<span><span class="co">#&gt;   In an ODE system, false convergence may mean "useless" evaluations were performed.</span></span>
<span><span class="co">#&gt;   See https://tinyurl.com/yyrrwkce</span></span>
<span><span class="co">#&gt;   It could also mean the convergence is poor, check results before accepting fit</span></span>
<span><span class="co">#&gt;   You may also try a good derivative free optimization:</span></span>
<span><span class="co">#&gt;     nlmixr2(...,control=list(outerOpt="bobyqa"))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">── Fit Data (object </span><span style="color: #BBBB00; font-weight: bold;">fit2</span><span style="font-weight: bold;"> is a modified </span><span style="color: #0000BB; font-weight: bold;">tibble</span><span style="font-weight: bold;">): ──</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 483 × 33</span></span></span>
<span><span class="co">#&gt;   ID     TIME CMT      DV  PRED   RES  WRES IPRED   IRES IWRES CPRED  CRES CWRES</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1       0.5 dcp     0    1.28 -<span style="color: #BB0000;">1.28</span> -<span style="color: #BB0000;">1.82</span>  1.01 -<span style="color: #BB0000;">1.01</span>  -<span style="color: #BB0000;">1.60</span>  1.25 -<span style="color: #BB0000;">1.25</span> -<span style="color: #BB0000;">1.86</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1       1   dcp     1.9  3.66 -<span style="color: #BB0000;">1.76</span> -<span style="color: #BB0000;">1.53</span>  2.89 -<span style="color: #BB0000;">0.991</span> -<span style="color: #BB0000;">1.33</span>  3.58 -<span style="color: #BB0000;">1.68</span> -<span style="color: #BB0000;">1.71</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 1       2   dcp     3.3  7.91 -<span style="color: #BB0000;">4.61</span> -<span style="color: #BB0000;">2.12</span>  6.22 -<span style="color: #BB0000;">2.92</span>  -<span style="color: #BB0000;">2.68</span>  7.73 -<span style="color: #BB0000;">4.43</span> -<span style="color: #BB0000;">2.55</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 480 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20 more variables: eta.cl &lt;dbl&gt;, eta.v &lt;dbl&gt;, eta.ec50 &lt;dbl&gt;, eta.e0 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   DEPOT &lt;dbl&gt;, GUT &lt;dbl&gt;, CENTER &lt;dbl&gt;, EFFECT &lt;dbl&gt;, ktr &lt;dbl&gt;, ka &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   cl &lt;dbl&gt;, v &lt;dbl&gt;, emax &lt;dbl&gt;, ec50 &lt;dbl&gt;, kout &lt;dbl&gt;, e0 &lt;dbl&gt;, pd &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   kin &lt;dbl&gt;, tad &lt;dbl&gt;, dosenum &lt;dbl&gt;</span></span></span></code></pre></div>
<p>With these modifications the shrinkage is also reduced (just like in
the NONMEM case)</p>
</div>
<div class="section level2">
<h2 id="step-5-get-the-covariance-of-the-model">Step 5: Get the covariance of the model<a class="anchor" aria-label="anchor" href="#step-5-get-the-covariance-of-the-model"></a>
</h2>
<p>Another thing that can be helpful when the fit has been imported into
a <code>nlmixr2</code> fit is to get the variance/covariance matrix.
This can be especially helpful to diagnose things to help simplify your
model</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/nlme/man/getVarCov.html" class="external-link">getVarCov</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="co">#&gt; → loading into <span style="color: #0000BB;">symengine</span> environment...</span></span>
<span><span class="co">#&gt; → pruning branches (`if`/`else`) of full model...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> done</span></span>
<span><span class="co">#&gt; → calculate jacobian</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → calculate sensitivities</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → calculate ∂(f)/∂(η)</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → finding duplicate expressions in inner model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → optimizing duplicate expressions in inner model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → finding duplicate expressions in EBE model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → optimizing duplicate expressions in EBE model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → compiling inner model...</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> done</span></span>
<span><span class="co">#&gt; → finding duplicate expressions in FD model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → optimizing duplicate expressions in FD model...</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:00</span></span>
<span><span class="co">#&gt; → compiling EBE model...</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> done</span></span>
<span><span class="co">#&gt; → compiling events FD model...</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> done</span></span>
<span><span class="co">#&gt; calculating covariance matrix</span></span>
<span><span class="co">#&gt; [====|====|====|====|====|====|====|====|====|====] 0:00:05</span></span>
<span><span class="co">#&gt; Warning in foceiFitCpp_(.ret): using R matrix to calculate covariance, can</span></span>
<span><span class="co">#&gt; check sandwich or S matrix with $covRS and $covS</span></span>
<span><span class="co">#&gt; Warning in foceiFitCpp_(.ret): gradient problems with covariance; see</span></span>
<span><span class="co">#&gt; $scaleInfo</span></span>
<span><span class="co">#&gt; → compress origData in nlmixr2 object, save 21592</span></span>
<span><span class="co">#&gt; Updated original fit object <span style="color: #BBBB00;">fit</span></span></span>
<span><span class="co">#&gt;                tktr           tka           tcl           tv         temax</span></span>
<span><span class="co">#&gt; tktr   1.830060e-02 -1.523057e-02 -2.404755e-05 3.183949e-04  0.0011992673</span></span>
<span><span class="co">#&gt; tka   -1.523057e-02  1.828061e-02 -2.125855e-05 3.195745e-04  0.0014273042</span></span>
<span><span class="co">#&gt; tcl   -2.404755e-05 -2.125855e-05  2.479870e-04 1.184906e-05 -0.0008486078</span></span>
<span><span class="co">#&gt; tv     3.183949e-04  3.195745e-04  1.184906e-05 3.183331e-04  0.0011376028</span></span>
<span><span class="co">#&gt; temax  1.199267e-03  1.427304e-03 -8.486078e-04 1.137603e-03  7.5951592101</span></span>
<span><span class="co">#&gt; tec50  1.333848e-04  1.362464e-04 -3.585788e-04 1.232516e-04  0.0485635015</span></span>
<span><span class="co">#&gt; tkout  9.641362e-05  1.069037e-04 -9.755546e-05 1.189674e-04 -0.0189321828</span></span>
<span><span class="co">#&gt; te0    1.365383e-05  1.343098e-05 -9.855499e-06 1.252947e-05 -0.0004450840</span></span>
<span><span class="co">#&gt;               tec50         tkout           te0</span></span>
<span><span class="co">#&gt; tktr   0.0001333848  9.641362e-05  1.365383e-05</span></span>
<span><span class="co">#&gt; tka    0.0001362464  1.069037e-04  1.343098e-05</span></span>
<span><span class="co">#&gt; tcl   -0.0003585788 -9.755546e-05 -9.855499e-06</span></span>
<span><span class="co">#&gt; tv     0.0001232516  1.189674e-04  1.252947e-05</span></span>
<span><span class="co">#&gt; temax  0.0485635015 -1.893218e-02 -4.450840e-04</span></span>
<span><span class="co">#&gt; tec50  0.0018384895  1.539214e-04 -1.360918e-04</span></span>
<span><span class="co">#&gt; tkout  0.0001539214  6.316775e-04  5.255583e-05</span></span>
<span><span class="co">#&gt; te0   -0.0001360918  5.255583e-05  8.870276e-05</span></span>
<span><span class="va">fit</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">── </span><span style="color: #0000BB; font-weight: bold;">nlmix</span><span style="color: #BB0000; font-weight: bold;">r²</span><span style="font-weight: bold;"> </span><span style="color: #BBBB00; font-weight: bold;">nonmem2rx</span><span style="font-weight: bold;"> reading NONMEM ver 7.4.3 ──</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;               OBJF     AIC      BIC Log-likelihood</span></span>
<span><span class="co">#&gt; nonmem2rx 439.2156 1364.91 1444.331      -663.4551</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">── Time (sec </span><span style="color: #BBBB00; font-weight: bold;">fit</span><span style="color: #0000BB; font-weight: bold;">$time</span><span style="font-weight: bold;">): ──</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;           setup table compress NONMEM as.nlmixr2 covariance</span></span>
<span><span class="co">#&gt; elapsed 0.03868 0.078     0.01 320.27       3.71     13.925</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">── Population Parameters (</span><span style="color: #BBBB00; font-weight: bold;">fit</span><span style="color: #0000BB; font-weight: bold;">$parFixed</span><span style="font-weight: bold;"> or </span><span style="color: #BBBB00; font-weight: bold;">fit</span><span style="color: #0000BB; font-weight: bold;">$parFixedDf</span><span style="font-weight: bold;">): ──</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                <span style="font-weight: bold;">Parameter</span>      <span style="font-weight: bold;">Est.</span>      <span style="font-weight: bold;">SE</span>     <span style="font-weight: bold;">%RSE</span> <span style="font-weight: bold;">Back-transformed(95%CI)</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tktr</span>            1 - <span style="font-weight: bold;">tktr</span>  6.24e-07   0.135 2.17e+07          1 (0.767, 1.3)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tka</span>              2 - <span style="font-weight: bold;">tka</span> -3.01e-06   0.135  4.5e+06          1 (0.767, 1.3)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tcl</span>              3 - <span style="font-weight: bold;">tcl</span>        -2  0.0157    0.786    0.135 (0.131, 0.139)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tv</span>                4 - <span style="font-weight: bold;">tv</span>      2.05  0.0178     0.87       7.78 (7.52, 8.06)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">prop.err</span>    5 - <span style="font-weight: bold;">prop.err</span>    0.0986                                   0.0986</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">pkadd.err</span>  6 - <span style="font-weight: bold;">pkadd.err</span>     0.512                                    0.512</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">temax</span>          7 - <span style="font-weight: bold;">temax</span>      6.42    2.76     42.9        0.998 (0.734, 1)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tec50</span>          8 - <span style="font-weight: bold;">tec50</span>     0.141  0.0429     30.5       1.15 (1.06, 1.25)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tkout</span>          9 - <span style="font-weight: bold;">tkout</span>     -2.95  0.0251    0.851 0.0522 (0.0497, 0.0548)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">te0</span>             10 - <span style="font-weight: bold;">te0</span>      4.57 0.00942    0.206       96.6 (94.8, 98.4)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">pdadd.err</span> 11 - <span style="font-weight: bold;">pdadd.err</span>      3.72                                     3.72</span></span>
<span><span class="co">#&gt;           <span style="font-weight: bold;">BSV(CV% or SD)</span> <span style="font-weight: bold;">Shrink(SD)%</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tktr</span>                86.5      <span style="color: #BB0000; font-weight: bold;">59.8%</span> </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tka</span>                 86.5      <span style="color: #BB0000; font-weight: bold;">59.8%</span> </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tcl</span>                 28.6      1.34% </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tv</span>                  22.8      6.44% </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">prop.err</span>                            </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">pkadd.err</span>                           </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">temax</span>            0.00707      <span style="color: #BB0000; font-weight: bold;">100.%</span> </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tec50</span>               45.0      6.06% </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">tkout</span>               9.16      <span style="color: #BB0000; font-weight: bold;">32.4%</span> </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">te0</span>                 5.24      18.1% </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">pdadd.err</span>                           </span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt;   Covariance Type (<span style="color: #BBBB00;">fit</span><span style="color: #0000BB; font-weight: bold;">$covMethod</span>): <span style="font-weight: bold;">r</span></span></span>
<span><span class="co">#&gt;   No correlations in between subject variability (BSV) matrix</span></span>
<span><span class="co">#&gt;   Full BSV covariance (<span style="color: #BBBB00;">fit</span><span style="color: #0000BB; font-weight: bold;">$omega</span>) or correlation (<span style="color: #BBBB00;">fit</span><span style="color: #0000BB; font-weight: bold;">$omegaR</span>; diagonals=SDs) </span></span>
<span><span class="co">#&gt;   Distribution stats (mean/skewness/kurtosis/p-value) available in <span style="color: #BBBB00;">fit</span><span style="color: #0000BB; font-weight: bold;">$shrink</span> </span></span>
<span><span class="co">#&gt;   Censoring (<span style="color: #BBBB00;">fit</span><span style="color: #0000BB; font-weight: bold;">$censInformation</span>): No censoring</span></span>
<span><span class="co">#&gt;   Minimization message (<span style="color: #BBBB00;">fit</span><span style="color: #0000BB; font-weight: bold;">$message</span>):  </span></span>
<span><span class="co">#&gt;     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  WARNINGS AND ERRORS (IF ANY) FOR PROBLEM    1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  (WARNING  2) NM-TRAN INFERS THAT THE DATA ARE POPULATION.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     </span></span>
<span><span class="co">#&gt; 0MINIMIZATION TERMINATED</span></span>
<span><span class="co">#&gt;  DUE TO ROUNDING ERRORS (ERROR=134)</span></span>
<span><span class="co">#&gt;  NO. OF FUNCTION EVALUATIONS USED:     1088</span></span>
<span><span class="co">#&gt;  NO. OF SIG. DIGITS UNREPORTABLE</span></span>
<span><span class="co">#&gt; 0PARAMETER ESTIMATE IS NEAR ITS BOUNDARY</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     IPRED relative difference compared to Nonmem IPRED: 0%; 95% percentile: (0%,0%); rtol=5.09e-06</span></span>
<span><span class="co">#&gt;     PRED relative difference compared to Nonmem PRED: 0%; 95% percentile: (0%,0%); rtol=5.29e-06</span></span>
<span><span class="co">#&gt;     IPRED absolute difference compared to Nonmem IPRED: 95% percentile: (2.2e-06, 0.000454); atol=3.03e-05</span></span>
<span><span class="co">#&gt;     PRED absolute difference compared to Nonmem PRED: 95% percentile: (4.72e-07,0.00361); atol=5.29e-06</span></span>
<span><span class="co">#&gt;     there are solving errors during optimization (see '$prderr')</span></span>
<span><span class="co">#&gt;     nonmem2rx model file: 'pk.turnover.emax3-nonmem/pk.turnover.emax3.nmctl' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">── Fit Data (object </span><span style="color: #BBBB00; font-weight: bold;">fit</span><span style="font-weight: bold;"> is a modified </span><span style="color: #0000BB; font-weight: bold;">tibble</span><span style="font-weight: bold;">): ──</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 483 × 35</span></span></span>
<span><span class="co">#&gt;   ID     TIME CMT      DV  PRED   RES IPRED   IRES  IWRES eta.ktr eta.ka eta.cl</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1       0.5 dcp     0    1.16 -<span style="color: #BB0000;">1.16</span> 0.444 -<span style="color: #BB0000;">0.444</span> -<span style="color: #BB0000;">0.864</span>  -<span style="color: #BB0000;">0.506</span> -<span style="color: #BB0000;">0.506</span>  0.699</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1       1   dcp     1.9  3.37 -<span style="color: #BB0000;">1.47</span> 1.45   0.446  0.840  -<span style="color: #BB0000;">0.506</span> -<span style="color: #BB0000;">0.506</span>  0.699</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 1       2   dcp     3.3  7.51 -<span style="color: #BB0000;">4.21</span> 3.96  -<span style="color: #BB0000;">0.660</span> -<span style="color: #BB0000;">1.03</span>   -<span style="color: #BB0000;">0.506</span> -<span style="color: #BB0000;">0.506</span>  0.699</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 480 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 23 more variables: eta.v &lt;dbl&gt;, eta.emax &lt;dbl&gt;, eta.ec50 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   eta.kout &lt;dbl&gt;, eta.e0 &lt;dbl&gt;, dcp &lt;dbl&gt;, eff &lt;dbl&gt;, DEPOT &lt;dbl&gt;, GUT &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   CENTER &lt;dbl&gt;, EFFECT &lt;dbl&gt;, ktr &lt;dbl&gt;, ka &lt;dbl&gt;, cl &lt;dbl&gt;, v &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   emax &lt;dbl&gt;, ec50 &lt;dbl&gt;, kout &lt;dbl&gt;, e0 &lt;dbl&gt;, pd &lt;dbl&gt;, kin &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   tad &lt;dbl&gt;, dosenum &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Note this covariance step is not 100% successful since it is not
<code>r, s</code>. However, it can give some insights on which
parameters are estimated well. In this case you can see that the
<code>emax</code> parameter is more poorly estimated than other
parameters, which means fixing the parameter or reducing other
parameters may help your estimate progress in <code>NONMEM</code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Fidler.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
