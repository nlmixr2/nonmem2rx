<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Convert a NONMEM source file to a rxode model (nlmixr2-syle) — nonmem2rx • nonmem2rx</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Convert a NONMEM source file to a rxode model (nlmixr2-syle) — nonmem2rx"><meta property="og:description" content="Convert a NONMEM source file to a rxode model (nlmixr2-syle)"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nonmem2rx</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert a NONMEM source file to a rxode model (nlmixr2-syle)</h1>
    
    <div class="hidden name"><code>nonmem2rx.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Convert a NONMEM source file to a rxode model (nlmixr2-syle)</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">nonmem2rx</span><span class="op">(</span></span>
<span>  <span class="va">file</span>,</span>
<span>  inputData <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nonmemOutputDir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rename <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tolowerLhs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  thetaNames <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  etaNames <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cmtNames <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  updateFinal <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  determineError <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  validate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.validate"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  nonmemData <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  strictLst <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  unintFixed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  extended <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  nLinesPro <span class="op">=</span> <span class="fl">20L</span>,</span>
<span>  delta <span class="op">=</span> <span class="fl">1e-04</span>,</span>
<span>  usePhi <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  useExt <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  useCov <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  useXml <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  useLst <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  mod <span class="op">=</span> <span class="st">".mod"</span>,</span>
<span>  cov <span class="op">=</span> <span class="st">".cov"</span>,</span>
<span>  phi <span class="op">=</span> <span class="st">".phi"</span>,</span>
<span>  lst <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.lst"</span>, <span class="st">".lst"</span><span class="op">)</span>,</span>
<span>  xml <span class="op">=</span> <span class="st">".xml"</span>,</span>
<span>  ext <span class="op">=</span> <span class="st">".ext"</span>,</span>
<span>  save <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.save"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.overwrite"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  load <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.load"</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>file</dt>
<dd><p>NONMEM run file, like an <code>.xml</code> or <code>.lst</code> file or even
a control stream</p></dd>


<dt>inputData</dt>
<dd><p>this is a path to the input dataset (or <code>NULL</code> to
determine from the dataset).  Often the input dataset may be
different from the place it points to in the control stream
because directories can be created to run NONMEM from a script.
Because of this, when this is specified the input data will be
assumed to be from here instead.</p></dd>


<dt>nonmemOutputDir</dt>
<dd><p>This is a path the the nonmem output
directory.  When not <code>NULL</code> it will assume that the diretory for
the output files is located here instead of where the control
stream currently exists.</p></dd>


<dt>rename</dt>
<dd><p>When not <code>NULL</code> this should be a named character
vector that contains the parameters that should be renamed.  For
example, if the model uses the variable <code>YTYPE</code> and has <code>CMT</code> it
isn't compatible with <code>rxode2</code>/<code>nlmixr2</code>. You can change this for
the input dataset and the model to create a new model that still
reproduces the NONMEM output by specifying
<code>rename=c(dvid="YTYPE")</code></p></dd>


<dt>tolowerLhs</dt>
<dd><p>Boolean to change the lhs to lower case (default:
<code>TRUE</code>)</p></dd>


<dt>thetaNames</dt>
<dd><p>this could be a boolean indicating that the theta
names should be changed to the comment-labeled names (default:
<code>TRUE</code>). This could also be a character vector of the theta names
(in order) to be replaced.</p></dd>


<dt>etaNames</dt>
<dd><p>this could be a boolean indicating that the eta
names should be changed to the comment-labeled names (default:
<code>TRUE</code>). This could also be a character vector of the theta names
(in order) to be replaced.</p></dd>


<dt>cmtNames</dt>
<dd><p>this could be a boolean indicating that the
compartment names should be changed to the named compartments in
the <code>$MODEL</code> by <code>COMP = (name)</code> (default: <code>TRUE</code>). This could
also be a character vector of the compartment names (in order) to
be replaced.</p></dd>


<dt>updateFinal</dt>
<dd><p>Update the parsed model with the model estimates
from the <code>.lst</code> output file.</p></dd>


<dt>determineError</dt>
<dd><p>Boolean to try to determine the <code>nlmixr2</code>-style residual
error model (like <code>ipred ~ add(add.sd)</code>), otherwise endpoints are
not defined in the <code>rxode2</code>/<code>nlmixr2</code> model (default: <code>TRUE</code>)</p></dd>


<dt>validate</dt>
<dd><p>Boolean that this tool will attempt to "validate"
the model by solving the derived model under pred conditions
(etas are zero and eps values are zero)</p></dd>


<dt>nonmemData</dt>
<dd><p>Boolean that tells <code>nonmem2rx</code> to read in the
nonmem data (if possible) even if the model will not be validated
(like if it is a simulation run or missing final parameter
estimates).  By default this is <code>FALSE</code>, nonmem data will not be
integrated into the nonmem2rx ui.</p></dd>


<dt>strictLst</dt>
<dd><p>The list parsing needs to be correct for a
successful load (default <code>FALSE</code>).</p></dd>


<dt>unintFixed</dt>
<dd><p>Treat uninteresting values as fixed parameters (default <code>FALSE</code>)</p></dd>


<dt>extended</dt>
<dd><p>Translate extended control streams from tools like
wings for NONMEM</p></dd>


<dt>nLinesPro</dt>
<dd><p>The number of lines to check for the $PROBLEM
statement.</p></dd>


<dt>delta</dt>
<dd><p>this is the offset for NONMEM times that are tied</p></dd>


<dt>usePhi</dt>
<dd><p>if present, use the NONMEM phi file to extract etas
(default <code>TRUE</code>), otherwise defaults to etas in the tables (if
present)</p></dd>


<dt>useExt</dt>
<dd><p>if present, use the NONMEM ext file to extract
parameter estimates (default <code>TRUE</code>), otherwise defaults to
parameter estimates extracted in the NONMEM output</p></dd>


<dt>useCov</dt>
<dd><p>if present, use the NONMEM cov file to import the
covariance, otherwise import the covariance with list file</p></dd>


<dt>useXml</dt>
<dd><p>if present, use the NONMEM xml file to import much of
the NONMEM information</p></dd>


<dt>useLst</dt>
<dd><p>if present, use the NONMEM lst file to extract NONMEM
information</p></dd>


<dt>mod</dt>
<dd><p>the NONMEM output extension, defaults to <code>.mod</code></p></dd>


<dt>cov</dt>
<dd><p>the NONMEM covariance file extension, defaults to <code>.cov</code></p></dd>


<dt>phi</dt>
<dd><p>the NONMEM eta/phi file extension, defaults to <code>.phi</code></p></dd>


<dt>lst</dt>
<dd><p>the NONMEM output extension, defaults to <code>.lst</code></p></dd>


<dt>xml</dt>
<dd><p>the NONMEM xml file extension , defaults to <code>.xml</code></p></dd>


<dt>ext</dt>
<dd><p>the NONMEM ext file extension, defaults to <code>.ext</code></p></dd>


<dt>save</dt>
<dd><p>This can be:</p><ul><li><p>a <code>NULL</code> (meaning don't save),</p></li>
<li><p>a logical (default <code>FALSE</code>, don't save) that when <code>TRUE</code> will use
the base name of the control stream, append <code>.qs</code> and save the file
using <code><a href="https://rdrr.io/pkg/qs/man/qsave.html" class="external-link">qs::qsave()</a></code></p></li>
<li><p>A path to a file to write</p>
<p>Note that this file will be saved with qs::qsave() and can be
loaded with qs::qread()</p></li>
</ul></dd>


<dt>overwrite</dt>
<dd><p>is a boolean to allow overwriting the save file
(see <code>load</code> for more information).</p></dd>


<dt>load</dt>
<dd><p>a boolean that says to load the save file (if it
exists) instead of re-running the translation and validation.
Note if <code>overwrite=TRUE</code> and <code>load=TRUE</code> then this will overwrite
based on time stamp of the files.  If the save file is newer than
the input file, then load that file, otherwise regenerate and
overwrite.  This works best if you point to an output file, like
a <code>.xml</code> or listing file instead of the control stream</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>rxode2 function</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Since some of these options you may want to set per project, the
following options are queried:</p><ul><li><p><code>nonmem2rx.validate</code> - boolean to validate the model (default: <code>TRUE</code>)</p></li>
<li><p><code>nonmem2rx.lst</code> - default extension for output (default: <code>.lst</code>)</p></li>
<li><p><code>nonmem2rx.save</code> - should nonmem2rx save the model output?</p></li>
<li><p><code>nonmem2rx.overwrite</code> - should nonmem2rx save output be
overwritten (default <code>TRUE</code>)</p></li>
<li><p><code>nonmem2rx.load</code> - should nonmem2rx load a saved model instead of
translating and validating again? (default <code>TRUE</code>)</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">nonmem2rx</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"run001.mod"</span>, package<span class="op">=</span><span class="st">"nonmem2rx"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in loadNamespace(x):</span> there is no package called ‘qzxccheckmate’</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">nonmem2rx</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"mods/cpt/runODE032.ctl"</span>, package<span class="op">=</span><span class="st">"nonmem2rx"</span><span class="op">)</span>, lst<span class="op">=</span><span class="st">".res"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in loadNamespace(x):</span> there is no package called ‘qzxccheckmate’</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Matthew Fidler.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

