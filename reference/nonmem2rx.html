<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Convert a NONMEM source file to a rxode model (nlmixr2-syle)"><title>Convert a NONMEM source file to a rxode model (nlmixr2-syle) — nonmem2rx • nonmem2rx</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert a NONMEM source file to a rxode model (nlmixr2-syle) — nonmem2rx"><meta property="og:description" content="Convert a NONMEM source file to a rxode model (nlmixr2-syle)"><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nonmem2rx</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--converting">
    <span class="fa fa-arrow-right"></span>
     
    Converting
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--converting">
    <a class="dropdown-item" href="../articles/import-nonmem.html">Converting NONMEM to rxode2 model</a>
    <a class="dropdown-item" href="../articles/convert-nlmixr2.html">Converting NONMEM to nlmixr2 object</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/rxode2-validate.html">
    <span class="fa fa-check"></span>
     
    Qualify
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--simulation">
    <span class="fa fa-dice"></span>
     
    Simulation
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--simulation">
    <a class="dropdown-item" href="../articles/simulate-new-dosing.html">New Dosing Scenarios</a>
    <a class="dropdown-item" href="../articles/simulate-uncertainty.html">Simulating with Uncertainty</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-reporting">Reporting</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-reporting">
    <a class="dropdown-item" href="../articles/create-office.html">Creating word and powerpoint documents</a>
    <a class="dropdown-item" href="../articles/create-vpc.html">Easily create VPC plots</a>
    <a class="dropdown-item" href="../articles/create-augPred.html">Create enriched Individual plots</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/read-rounding.html">
    <span class="fa fa-bug"></span>
     
    Debug
  </a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fas fa fas fa-rss"></span>
     
    News
  </a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nlmixr2/nonmem2rx/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Convert a NONMEM source file to a rxode model (nlmixr2-syle)</h1>
      <small class="dont-index">Source: <a href="https://github.com/nlmixr2/nonmem2rx/blob/HEAD/R/nonmem2rx.R" class="external-link"><code>R/nonmem2rx.R</code></a></small>
      <div class="d-none name"><code>nonmem2rx.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Convert a NONMEM source file to a rxode model (nlmixr2-syle)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">nonmem2rx</span><span class="op">(</span></span>
<span>  <span class="va">file</span>,</span>
<span>  inputData <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nonmemOutputDir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rename <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tolowerLhs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  thetaNames <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  etaNames <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cmtNames <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  updateFinal <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  determineError <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  validate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.validate"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  nonmemData <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  strictLst <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  unintFixed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  extended <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.extended"</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  nLinesPro <span class="op">=</span> <span class="fl">20L</span>,</span>
<span>  delta <span class="op">=</span> <span class="fl">1e-04</span>,</span>
<span>  usePhi <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  useExt <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  useCov <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  useXml <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  useLst <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  mod <span class="op">=</span> <span class="st">".mod"</span>,</span>
<span>  cov <span class="op">=</span> <span class="st">".cov"</span>,</span>
<span>  phi <span class="op">=</span> <span class="st">".phi"</span>,</span>
<span>  lst <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.lst"</span>, <span class="st">".lst"</span><span class="op">)</span>,</span>
<span>  xml <span class="op">=</span> <span class="st">".xml"</span>,</span>
<span>  ext <span class="op">=</span> <span class="st">".ext"</span>,</span>
<span>  scanLines <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.scanLines"</span>, <span class="fl">50L</span><span class="op">)</span>,</span>
<span>  save <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.save"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  saveTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.saveTime"</span>, <span class="fl">15</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.overwrite"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  load <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.load"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  compress <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nonmem2rx.compress"</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>file</dt>
<dd><p>NONMEM run file, like an <code>.xml</code> or <code>.lst</code> file or even
a control stream</p></dd>


<dt>inputData</dt>
<dd><p>this is a path to the input dataset (or <code>NULL</code> to
determine from the dataset).  Often the input dataset may be
different from the place it points to in the control stream
because directories can be created to run NONMEM from a script.
Because of this, when this is specified the input data will be
assumed to be from here instead.</p></dd>


<dt>nonmemOutputDir</dt>
<dd><p>This is a path the the nonmem output
directory.  When not <code>NULL</code> it will assume that the diretory for
the output files is located here instead of where the control
stream currently exists.</p></dd>


<dt>rename</dt>
<dd><p>When not <code>NULL</code> this should be a named character
vector that contains the parameters that should be renamed.  For
example, if the model uses the variable <code>YTYPE</code> and has <code>CMT</code> it
isn't compatible with <code>rxode2</code>/<code>nlmixr2</code>. You can change this for
the input dataset and the model to create a new model that still
reproduces the NONMEM output by specifying
<code>rename=c(dvid="YTYPE")</code></p></dd>


<dt>tolowerLhs</dt>
<dd><p>Boolean to change the lhs to lower case (default:
<code>TRUE</code>)</p></dd>


<dt>thetaNames</dt>
<dd><p>this could be a boolean indicating that the theta
names should be changed to the comment-labeled names (default:
<code>TRUE</code>). This could also be a character vector of the theta names
(in order) to be replaced.</p></dd>


<dt>etaNames</dt>
<dd><p>this could be a boolean indicating that the eta
names should be changed to the comment-labeled names (default:
<code>TRUE</code>). This could also be a character vector of the theta names
(in order) to be replaced.</p></dd>


<dt>cmtNames</dt>
<dd><p>this could be a boolean indicating that the
compartment names should be changed to the named compartments in
the <code>$MODEL</code> by <code>COMP = (name)</code> (default: <code>TRUE</code>). This could
also be a character vector of the compartment names (in order) to
be replaced.</p></dd>


<dt>updateFinal</dt>
<dd><p>Update the parsed model with the model estimates
from the <code>.lst</code> output file.</p></dd>


<dt>determineError</dt>
<dd><p>Boolean to try to determine the <code>nlmixr2</code>-style residual
error model (like <code>ipred ~ add(add.sd)</code>), otherwise endpoints are
not defined in the <code>rxode2</code>/<code>nlmixr2</code> model (default: <code>TRUE</code>)</p></dd>


<dt>validate</dt>
<dd><p>Boolean that this tool will attempt to "validate"
the model by solving the derived model under pred conditions
(etas are zero and eps values are zero)</p></dd>


<dt>nonmemData</dt>
<dd><p>Boolean that tells <code>nonmem2rx</code> to read in the
nonmem data (if possible) even if the model will not be validated
(like if it is a simulation run or missing final parameter
estimates).  By default this is <code>FALSE</code>, nonmem data will not be
integrated into the nonmem2rx ui.</p></dd>


<dt>strictLst</dt>
<dd><p>The list parsing needs to be correct for a
successful load (default <code>FALSE</code>).</p></dd>


<dt>unintFixed</dt>
<dd><p>Treat uninteresting values as fixed parameters (default <code>FALSE</code>)</p></dd>


<dt>extended</dt>
<dd><p>Translate extended control streams from tools like
wings for NONMEM</p></dd>


<dt>nLinesPro</dt>
<dd><p>The number of lines to check for the $PROBLEM
statement.</p></dd>


<dt>delta</dt>
<dd><p>this is the offset for NONMEM times that are tied</p></dd>


<dt>usePhi</dt>
<dd><p>if present, use the NONMEM phi file to extract etas
(default <code>TRUE</code>), otherwise defaults to etas in the tables (if
present)</p></dd>


<dt>useExt</dt>
<dd><p>if present, use the NONMEM ext file to extract
parameter estimates (default <code>TRUE</code>), otherwise defaults to
parameter estimates extracted in the NONMEM output</p></dd>


<dt>useCov</dt>
<dd><p>if present, use the NONMEM cov file to import the
covariance, otherwise import the covariance with list file</p></dd>


<dt>useXml</dt>
<dd><p>if present, use the NONMEM xml file to import much of
the NONMEM information</p></dd>


<dt>useLst</dt>
<dd><p>if present, use the NONMEM lst file to extract NONMEM
information</p></dd>


<dt>mod</dt>
<dd><p>the NONMEM output extension, defaults to <code>.mod</code></p></dd>


<dt>cov</dt>
<dd><p>the NONMEM covariance file extension, defaults to <code>.cov</code></p></dd>


<dt>phi</dt>
<dd><p>the NONMEM eta/phi file extension, defaults to <code>.phi</code></p></dd>


<dt>lst</dt>
<dd><p>the NONMEM output extension, defaults to <code>.lst</code></p></dd>


<dt>xml</dt>
<dd><p>the NONMEM xml file extension , defaults to <code>.xml</code></p></dd>


<dt>ext</dt>
<dd><p>the NONMEM ext file extension, defaults to <code>.ext</code></p></dd>


<dt>scanLines</dt>
<dd><p>number of lines to scan for comment chars when
<code>IGNORE=@</code>, default is 50</p></dd>


<dt>save</dt>
<dd><p>This can be:</p><ul><li><p>a <code>NULL</code> (meaning don't save),</p></li>
<li><p>a logical (default <code>FALSE</code>, don't save) that when <code>TRUE</code> will use
the base name of the control stream, append <code>.qs</code> and save the file
using <code><a href="https://rdrr.io/pkg/qs/man/qsave.html" class="external-link">qs::qsave()</a></code></p></li>
<li><p>A path to a file to write</p>
<p>Note that this file will be saved with qs::qsave() and can be
loaded with qs::qread()</p></li>
<li><p>A <code>NA</code> value which means save if the whole process (including
validation) takes too much time</p></li>
</ul></dd>


<dt>saveTime</dt>
<dd><p>The time that the translation/validation needs (in
secs) before it will save to avoid having to rerun the model
(default 15 for 15 seconds)</p></dd>


<dt>overwrite</dt>
<dd><p>is a boolean to allow overwriting the save file
(see <code>load</code> for more information).</p></dd>


<dt>load</dt>
<dd><p>a boolean that says to load the save file (if it
exists) instead of re-running the translation and validation.
Note if <code>overwrite=TRUE</code> and <code>load=TRUE</code> then this will overwrite
based on time stamp of the files.  If the save file is newer than
the input file, then load that file, otherwise regenerate and
overwrite.  This works best if you point to an output file, like
a <code>.xml</code> or listing file instead of the control stream</p></dd>


<dt>compress</dt>
<dd><p>a boolean indicating if the UI should be a
compressed UI.  If you are using this for simulation with old
versions of rxode2, the compressed ui is not supported, so this
should be <code>FALSE</code>. Otherwise use <code>TRUE</code> if you are using a newer
rxode2.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>rxode2 function</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Since some of these options you may want to set per project, the
following options are queried:</p><ul><li><p><code>nonmem2rx.validate</code> - boolean to validate the model (default: <code>TRUE</code>)</p></li>
<li><p><code>nonmem2rx.lst</code> - default extension for output (default: <code>.lst</code>)</p></li>
<li><p><code>nonmem2rx.save</code> - should nonmem2rx save the model output?</p></li>
<li><p><code>nonmem2rx.overwrite</code> - should nonmem2rx save output be
overwritten (default <code>TRUE</code>)</p></li>
<li><p><code>nonmem2rx.load</code> - should nonmem2rx load a saved model instead of
translating and validating again? (default <code>TRUE</code>)</p></li>
<li><p><code>nonmem2rx.extended</code> - should nonmem2rx support extended control
streams? (default <code>FALSE</code>)</p></li>
<li><p><code>nonmem2rx.compress</code> - should the ui be compressed or
uncompressed (default: <code>TRUE</code>)</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu">nonmem2rx</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"mods/cpt/runODE032.ctl"</span>, package<span class="op">=</span><span class="st">"nonmem2rx"</span><span class="op">)</span>, lst<span class="op">=</span><span class="st">".res"</span>, save<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> getting information from  '/home/runner/work/_temp/Library/nonmem2rx/mods/cpt/runODE032.ctl'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> reading in xml file</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> done</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> reading in phi file</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> done</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> reading in lst file</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> abbreviated list parsing</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> done</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> done</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> splitting control stream by records</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> done</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $INPUT</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $MODEL</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $THETA</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $OMEGA</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $SIGMA</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $PROBLEM</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $DATA</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $SUBROUTINES</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $PK</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $DES</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $ERROR</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $ESTIMATION</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Ignore record $ESTIMATION</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $COVARIANCE</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Ignore record $COVARIANCE</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Processing record $TABLE</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta1` to `1.37034036528946`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta2` to `4.19814911033061`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta3` to `1.38003493562413`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta4` to `3.87657341967489`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> change initial estimate of `theta5` to `0.196446108190896`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta1` to `0.101251418415006`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta2` to `0.0993872449483344`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta3` to `0.101302674763154`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> change initial estimate of `eta4` to `0.0730497519364148`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> read in nonmem input data (for model validation): /home/runner/work/_temp/Library/nonmem2rx/mods/cpt/Bolus_2CPT.csv</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> ignoring lines that begin with a letter (IGNORE=@)'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> applying names specified by $INPUT</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> subsetting accept/ignore filters code: .data[-which((.data$SD == 0)),]</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> done</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> using C compiler: ‘gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> read in nonmem IPRED data (for model validation): /home/runner/work/_temp/Library/nonmem2rx/mods/cpt/runODE032.csv</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> done</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> changing most variables to lower case</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> done</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> replace theta names</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> done</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> replace eta names</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> done (no labels)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> renaming compartments</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> done</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> using C compiler: ‘gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> solving ipred problem</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> done</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> solving pred problem</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> done</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mod</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">rxode2-based free-form 2-cmt ODE model</span> <span style="color: #00BBBB;">──────────────────────────────────────</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ── <span style="font-weight: bold;">Initalization:</span> ──  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Fixed Effects</span> (<span style="color: #0000BB; font-weight: bold;">$theta</span>): </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    theta1    theta2    theta3    theta4       RSV </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1.3703404 4.1981491 1.3800349 3.8765734 0.1964461 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Omega</span> (<span style="color: #0000BB; font-weight: bold;">$omega</span>): </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           eta1       eta2      eta3       eta4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> eta1 0.1012514 0.00000000 0.0000000 0.00000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> eta2 0.0000000 0.09938724 0.0000000 0.00000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> eta3 0.0000000 0.00000000 0.1013027 0.00000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> eta4 0.0000000 0.00000000 0.0000000 0.07304975</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">States</span> (<span style="color: #0000BB; font-weight: bold;">$state</span> or <span style="color: #0000BB; font-weight: bold;">$stateDf</span>): </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Compartment Number Compartment Name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                  1          CENTRAL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                  2             PERI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ── <span style="font-weight: bold;">μ-referencing (</span><span style="color: #0000BB; font-weight: bold;">$muRefTable</span><span style="font-weight: bold;">):</span> ──  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    theta  eta level</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 theta1 eta1    id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 theta2 eta2    id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 theta3 eta3    id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 theta4 eta4    id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ── <span style="font-weight: bold;">Model (Normalized Syntax):</span> ── </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function() {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     description &lt;- "BOLUS_2CPT_CLV1QV2 SINGLE DOSE FOCEI (120 Ind/2280 Obs) runODE032"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     validation &lt;- c("IPRED relative difference compared to Nonmem IPRED: 0%; 95% percentile: (0%,0%); rtol=6.43e-06", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         "IPRED absolute difference compared to Nonmem IPRED: 95% percentile: (2.19e-05, 0.0418); atol=0.00167", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         "IWRES relative difference compared to Nonmem IWRES: 0%; 95% percentile: (0%,0.01%); rtol=8.99e-06", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         "IWRES absolute difference compared to Nonmem IWRES: 95% percentile: (1.82e-07, 4.63e-05); atol=3.65e-06", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         "PRED relative difference compared to Nonmem PRED: 0%; 95% percentile: (0%,0%); rtol=6.41e-06", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         "PRED absolute difference compared to Nonmem PRED: 95% percentile: (1.41e-07,0.00382) atol=6.41e-06")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ini({</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         theta1 &lt;- 1.37034036528946</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         label("log Cl")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         theta2 &lt;- 4.19814911033061</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         label("log Vc")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         theta3 &lt;- 1.38003493562413</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         label("log Q")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         theta4 &lt;- 3.87657341967489</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         label("log Vp")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         RSV &lt;- c(0, 0.196446108190896, 1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         label("RSV")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         eta1 ~ 0.101251418415006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         eta2 ~ 0.0993872449483344</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         eta3 ~ 0.101302674763154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         eta4 ~ 0.0730497519364148</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     })</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     model({</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         cmt(CENTRAL)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         cmt(PERI)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         cl &lt;- exp(theta1 + eta1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         v &lt;- exp(theta2 + eta2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         q &lt;- exp(theta3 + eta3)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         v2 &lt;- exp(theta4 + eta4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         v1 &lt;- v</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         scale1 &lt;- v</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         k21 &lt;- q/v2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         k12 &lt;- q/v</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         d/dt(CENTRAL) &lt;- k21 * PERI - k12 * CENTRAL - cl * CENTRAL/v1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         d/dt(PERI) &lt;- -k21 * PERI + k12 * CENTRAL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         f &lt;- CENTRAL/scale1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ipred &lt;- f</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         rescv &lt;- RSV</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ipred ~ prop(RSV)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     })</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ── <span style="font-weight: bold;">nonmem2rx translation notes (</span><span style="color: #0000BB; font-weight: bold;">$notes</span><span style="font-weight: bold;">):</span> ──  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    • there are duplicate eta names, not renaming duplicate parameters </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    • there are duplicate theta names, not renaming duplicate parameters </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ── <span style="font-weight: bold;">nonmem2rx extra properties:</span> ──  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> other properties include: <span style="color: #0000BB; font-weight: bold;">$nonmemData</span>, <span style="color: #0000BB; font-weight: bold;">$etaData</span>, <span style="color: #0000BB; font-weight: bold;">$thetaMat</span>, <span style="color: #0000BB; font-weight: bold;">$dfSub</span>, <span style="color: #0000BB; font-weight: bold;">$dfObs</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> captured NONMEM table outputs: <span style="color: #0000BB; font-weight: bold;">$predData</span>, <span style="color: #0000BB; font-weight: bold;">$ipredData</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NONMEM/rxode2 comparison data: <span style="color: #0000BB; font-weight: bold;">$iwresCompare</span>, <span style="color: #0000BB; font-weight: bold;">$predCompare</span>, <span style="color: #0000BB; font-weight: bold;">$ipredCompare</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NONMEM/rxode2 composite comparison: <span style="color: #0000BB; font-weight: bold;">$predAtol</span>, <span style="color: #0000BB; font-weight: bold;">$predRtol</span>, <span style="color: #0000BB; font-weight: bold;">$ipredAtol</span>, <span style="color: #0000BB; font-weight: bold;">$ipredRtol</span>, <span style="color: #0000BB; font-weight: bold;">$iwresAtol</span>, <span style="color: #0000BB; font-weight: bold;">$iwresRtol</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># you can plot to compare the pred/ipred differences</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="nonmem2rx-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if you want to see the individual differences</span></span></span>
<span class="r-in"><span><span class="co"># you can by plotting by page of plots</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span>, nrow<span class="op">=</span><span class="fl">2</span>, ncol<span class="op">=</span><span class="fl">2</span>, page<span class="op">=</span><span class="fl">1</span>, log<span class="op">=</span><span class="st">"y"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="nonmem2rx-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># or select which pages you want to print</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span>, nrow<span class="op">=</span><span class="fl">2</span>, ncol<span class="op">=</span><span class="fl">2</span>, page<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span>, log<span class="op">=</span><span class="st">"y"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="nonmem2rx-3.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="nonmem2rx-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#' or even  all the individuals with</span></span></span>
<span class="r-in"><span><span class="co"># plot(page=TRUE)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span>, nrow<span class="op">=</span><span class="fl">5</span>, ncol<span class="op">=</span><span class="fl">5</span>, page<span class="op">=</span><span class="cn">TRUE</span>, log<span class="op">=</span><span class="st">"y"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="nonmem2rx-5.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="nonmem2rx-6.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="nonmem2rx-7.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="nonmem2rx-8.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="nonmem2rx-9.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># you can also convert to a nlmixr2 object, but need babelmixr2 for</span></span></span>
<span class="r-in"><span><span class="co"># that conversion</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Matthew Fidler.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

