<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Converts NONMEM Models to rxode2 â€¢ nonmem2rx</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Converts NONMEM Models to rxode2">
<meta name="description" content="NONMEM has been a tool for running nonlinear mixed effects models since the 80s and is still used today (Bauer 2019 &lt;doi:10.1002/psp4.12404&gt;). This tool allows you to convert NONMEM models to rxode2 (Wang, Hallow and James (2016) &lt;doi:10.1002/psp4.12052&gt;) and with simple models nlmixr2 syntax (Fidler et al (2019) &lt;doi:10.1002/psp4.12445&gt;). The nlmixr2 syntax requires the residual specification to be included and it is not always translated. If available, the rxode2 model will read in the NONMEM data and compare the simulation for the population model (PRED) individual model (IPRED) and residual model (IWRES) to immediately show how well the translation is performing. This saves the model development time for people who are creating an rxode2 model manually. Additionally, this package reads in all the information to allow simulation with uncertainty (that is the number of observations, the number of subjects, and the covariance matrix) with a rxode2 model. This is complementary to the babelmixr2 package that translates nlmixr2 models to NONMEM and can convert the objects converted from nonmem2rx to a full nlmixr2 fit.">
<meta property="og:description" content="NONMEM has been a tool for running nonlinear mixed effects models since the 80s and is still used today (Bauer 2019 &lt;doi:10.1002/psp4.12404&gt;). This tool allows you to convert NONMEM models to rxode2 (Wang, Hallow and James (2016) &lt;doi:10.1002/psp4.12052&gt;) and with simple models nlmixr2 syntax (Fidler et al (2019) &lt;doi:10.1002/psp4.12445&gt;). The nlmixr2 syntax requires the residual specification to be included and it is not always translated. If available, the rxode2 model will read in the NONMEM data and compare the simulation for the population model (PRED) individual model (IPRED) and residual model (IWRES) to immediately show how well the translation is performing. This saves the model development time for people who are creating an rxode2 model manually. Additionally, this package reads in all the information to allow simulation with uncertainty (that is the number of observations, the number of subjects, and the covariance matrix) with a rxode2 model. This is complementary to the babelmixr2 package that translates nlmixr2 models to NONMEM and can convert the objects converted from nonmem2rx to a full nlmixr2 fit.">
<meta property="og:image" content="/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">nonmem2rx</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-converting" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-arrow-right"></span> Converting</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-converting">
<li><a class="dropdown-item" href="articles/import-nonmem.html">Converting NONMEM to rxode2 model</a></li>
    <li><a class="dropdown-item" href="articles/convert-nlmixr2.html">Converting NONMEM to nlmixr2 object</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="articles/rxode2-validate.html"><span class="fa fa-check"></span> Qualify</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-simulation" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-dice"></span> Simulation</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-simulation">
<li><a class="dropdown-item" href="articles/simulate-new-dosing.html">New Dosing Scenarios</a></li>
    <li><a class="dropdown-item" href="articles/simulate-uncertainty.html">Simulating with Uncertainty</a></li>
    <li><a class="dropdown-item" href="articles/simulate-extra-items.html">Simulating with Derived Variables</a></li>
    <li><a class="dropdown-item" href="articles/simulate-new-dosing-with-covs.html">Simulating with Covariates/Input PK parameters</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reporting" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reporting</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reporting">
<li><a class="dropdown-item" href="articles/create-office.html">Creating word and powerpoint documents</a></li>
    <li><a class="dropdown-item" href="articles/create-vpc.html">Easily create VPC plots</a></li>
    <li><a class="dropdown-item" href="articles/create-augPred.html">Create enriched Individual plots</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="articles/read-rounding.html"><span class="fa fa-bug"></span> Debug</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html"><span class="fa fa-file-code-o"></span> Functions</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html"><span class="fa fas fa-rss"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nlmixr2/nonmem2rx/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.svg" class="logo" alt=""><h1 id="nonmem2rx">nonmem2rx<a class="anchor" aria-label="anchor" href="#nonmem2rx"></a>
</h1>
</div>
<!-- badges: start -->

<p>The goal of nonmem2rx is to convert a NONMEM control stream to a <code>rxode2</code> (or even a <code>nlmixr2</code> fit) for easy clinical trial simulation in R.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of nonmem2rx from <a href="https://github.com/" class="external-link">GitHub</a> with the r-universe:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'nonmem2rx'</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'https://nlmixr2.r-universe.dev'</span>, <span class="st">'https://cloud.r-project.org'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>When on CRAN, you can also get the CRAN version by:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'nonmem2rx'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="what-you-can-do-with-nonmem2rxbabelmixr2">What you can do with <code>nonmem2rx</code>/<code>babelmixr2</code>
<a class="anchor" aria-label="anchor" href="#what-you-can-do-with-nonmem2rxbabelmixr2"></a>
</h2>
<div class="float">
<img src="https://github.com/nlmixr2/nonmem2rx/assets/514778/803feb11-f2d9-4a5e-af08-834d9541ac11" alt="nonmem2rx-flowchart"><div class="figcaption">nonmem2rx-flowchart</div>
</div>
<p>You can do many useful tasks directly converting between nlmixr2 and NONMEM models; you can:</p>
<ul>
<li><p><a href="https://nlmixr2.github.io/nonmem2rx/articles/import-nonmem.html" class="external-link">Convert a NONMEM model to a rxode2 model</a></p></li>
<li><p><a href="https://nlmixr2.github.io/babelmixr2/articles/running-nonmem.html" class="external-link">Do development in nlmixr2 and then run NONMEM from a nlmixr2 model</a> for reviewers who want to know about NONMEM results.</p></li>
<li><p>In both conversions, <a href="https://nlmixr2.github.io/nonmem2rx/articles/rxode2-validate.html" class="external-link">automatically make sure the model is translated correctly</a> (for <a href="https://nlmixr2.github.io/babelmixr2/articles/running-nonmem.html#optional-step-2-recover-a-failed-nonmem-run" class="external-link">babelmixr2</a>)</p></li>
</ul>
<p>Then with nlmixr2 fit models and nonmem2rx models coming from both conversions, you can:</p>
<ul>
<li><p><a href="https://nlmixr2.github.io/nonmem2rx/articles/simulate-new-dosing.html" class="external-link">Perform simulations of new dosing</a> from the NONMEM model or even <a href="https://nlmixr2.github.io/nonmem2rx/articles/simulate-uncertainty.html" class="external-link">simulate using the uncertainty in your model to simulate new scenarios</a></p></li>
<li><p><a href="https://nlmixr2.github.io/nonmem2rx/articles/simulate-extra-items.html" class="external-link">Modify the model to calculate derived parameters</a> (like AUC). These parameters slow down NONMEMâ€™s optimization, but can help in your simulation scenario.</p></li>
<li><p><a href="https://nlmixr2.github.io/nonmem2rx/articles/simulate-new-dosing-with-covs.html" class="external-link">Simulating with Covariates/Input PK parameters</a>. This example shows approaches to resample from the input dataset for covariate selection.</p></li>
</ul>
<p>With nonmem2rx and babelmixr2, convert the imported rxode2 model to a nlmixr2 object, allowing:</p>
<ul>
<li><p><a href="https://nlmixr2.github.io/nonmem2rx/articles/create-office.html" class="external-link">Generation of Word and PowerPoint plots with nlmixr2rpt</a></p></li>
<li><p><a href="https://nlmixr2.github.io/nonmem2rx/articles/create-vpc.html" class="external-link">Easy VPC creation</a> (with <code>vpcPlot()</code>)</p></li>
<li><p><a href="https://nlmixr2.github.io/nonmem2rx/articles/create-augPred.html" class="external-link">Easy Individual plots with extra solved points</a>. This will show the curvature of individual and population fits for sparse data-sets (with <code>augPred()</code>)</p></li>
</ul>
<p>You can even use this conversion to help debug your NONMEM model (or even try it in nlmixr2 instead)</p>
<ul>
<li><p><a href="https://nlmixr2.github.io/nonmem2rx/articles/read-rounding.html" class="external-link">Understand how to simplify the NONMEM model to avoid rounding errors</a></p></li>
<li><p><a href="https://nlmixr2.github.io/nonmem2rx/articles/read-rounding.html#step-5-get-the-covariance-of-the-model" class="external-link">Run nlmixr2â€™s covariance step when NONMEMs covariance step has failed</a> (in the linked example, there was no covariance step because rounding errors)</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="simple-example">Simple example<a class="anchor" aria-label="anchor" href="#simple-example"></a>
</h2>
<p>Once <code>nonmem2rx</code> has been loaded, you simply type the location of the nonmem control stream for the parser to start. For example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nlmixr2.github.io/nonmem2rx/" class="external-link">nonmem2rx</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># First we need the location of the nonmem control stream Since we are</span></span>
<span><span class="co"># running an example, we will use one of the built-in examples in</span></span>
<span><span class="co"># `nonmem2rx`</span></span>
<span><span class="va">ctlFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"mods/cpt/runODE032.ctl"</span>, package<span class="op">=</span><span class="st">"nonmem2rx"</span><span class="op">)</span></span>
<span><span class="co"># You can use a control stream or other file. With the development</span></span>
<span><span class="co"># version of `babelmixr2`, you can simply point to the listing file</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/nonmem2rx.html">nonmem2rx</a></span><span class="op">(</span><span class="va">ctlFile</span>, lst<span class="op">=</span><span class="st">".res"</span>, save<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; â„¹ getting information from  '/tmp/RtmphCfr0E/temp_libpathaf275a605b00/nonmem2rx/mods/cpt/runODE032.ctl'</span></span>
<span><span class="co">#&gt; â„¹ reading in xml file</span></span>
<span><span class="co">#&gt; â„¹ done</span></span>
<span><span class="co">#&gt; â„¹ reading in phi file</span></span>
<span><span class="co">#&gt; â„¹ done</span></span>
<span><span class="co">#&gt; â„¹ reading in lst file</span></span>
<span><span class="co">#&gt; â„¹ abbreviated list parsing</span></span>
<span><span class="co">#&gt; â„¹ done</span></span>
<span><span class="co">#&gt; â„¹ done</span></span>
<span><span class="co">#&gt; â„¹ splitting control stream by records</span></span>
<span><span class="co">#&gt; â„¹ done</span></span>
<span><span class="co">#&gt; â„¹ Processing record $INPUT</span></span>
<span><span class="co">#&gt; â„¹ Processing record $MODEL</span></span>
<span><span class="co">#&gt; â„¹ Processing record $THETA</span></span>
<span><span class="co">#&gt; â„¹ Processing record $OMEGA</span></span>
<span><span class="co">#&gt; â„¹ Processing record $SIGMA</span></span>
<span><span class="co">#&gt; â„¹ Processing record $PROBLEM</span></span>
<span><span class="co">#&gt; â„¹ Processing record $DATA</span></span>
<span><span class="co">#&gt; â„¹ Processing record $SUBROUTINES</span></span>
<span><span class="co">#&gt; â„¹ Processing record $PK</span></span>
<span><span class="co">#&gt; â„¹ Processing record $DES</span></span>
<span><span class="co">#&gt; â„¹ Processing record $ERROR</span></span>
<span><span class="co">#&gt; â„¹ Processing record $ESTIMATION</span></span>
<span><span class="co">#&gt; â„¹ Ignore record $ESTIMATION</span></span>
<span><span class="co">#&gt; â„¹ Processing record $COVARIANCE</span></span>
<span><span class="co">#&gt; â„¹ Ignore record $COVARIANCE</span></span>
<span><span class="co">#&gt; â„¹ Processing record $TABLE</span></span>
<span><span class="co">#&gt; â„¹ change initial estimate of `theta1` to `1.37034036528946`</span></span>
<span><span class="co">#&gt; â„¹ change initial estimate of `theta2` to `4.19814911033061`</span></span>
<span><span class="co">#&gt; â„¹ change initial estimate of `theta3` to `1.38003493562413`</span></span>
<span><span class="co">#&gt; â„¹ change initial estimate of `theta4` to `3.87657341967489`</span></span>
<span><span class="co">#&gt; â„¹ change initial estimate of `theta5` to `0.196446108190896`</span></span>
<span><span class="co">#&gt; â„¹ change initial estimate of `eta1` to `0.101251418415006`</span></span>
<span><span class="co">#&gt; â„¹ change initial estimate of `eta2` to `0.0993872449483344`</span></span>
<span><span class="co">#&gt; â„¹ change initial estimate of `eta3` to `0.101302674763154`</span></span>
<span><span class="co">#&gt; â„¹ change initial estimate of `eta4` to `0.0730497519364148`</span></span>
<span><span class="co">#&gt; â„¹ read in nonmem input data (for model validation): /tmp/RtmphCfr0E/temp_libpathaf275a605b00/nonmem2rx/mods/cpt/Bolus_2CPT.csv</span></span>
<span><span class="co">#&gt; â„¹ ignoring lines that begin with a letter (IGNORE=@)'</span></span>
<span><span class="co">#&gt; â„¹ applying names specified by $INPUT</span></span>
<span><span class="co">#&gt; â„¹ subsetting accept/ignore filters code: .data[-which((.data$SD == 0)),]</span></span>
<span><span class="co">#&gt; â„¹ done</span></span>
<span><span class="co">#&gt; using C compiler: â€˜gcc (Ubuntu 11.3.0-1ubuntu1~22.04.1) 11.3.0â€™</span></span>
<span><span class="co">#&gt; In file included from /usr/share/R/include/R.h:71,</span></span>
<span><span class="co">#&gt;                  from /home/matt/R/x86_64-pc-linux-gnu-library/4.3/rxode2/include/rxode2.h:9,</span></span>
<span><span class="co">#&gt;                  from /home/matt/R/x86_64-pc-linux-gnu-library/4.3/rxode2parse/include/rxode2_model_shared.h:3,</span></span>
<span><span class="co">#&gt;                  from rx_d16f021bc9a6b4f5e2be95cdc7bf3d57_.c:115:</span></span>
<span><span class="co">#&gt; /usr/share/R/include/R_ext/Complex.h:80:6: warning: ISO C99 doesnâ€™t support unnamed structs/unions [-Wpedantic]</span></span>
<span><span class="co">#&gt;    80 |     };</span></span>
<span><span class="co">#&gt;       |      ^</span></span>
<span><span class="co">#&gt; â„¹ read in nonmem IPRED data (for model validation): /tmp/RtmphCfr0E/temp_libpathaf275a605b00/nonmem2rx/mods/cpt/runODE032.csv</span></span>
<span><span class="co">#&gt; â„¹ done</span></span>
<span><span class="co">#&gt; â„¹ changing most variables to lower case</span></span>
<span><span class="co">#&gt; â„¹ done</span></span>
<span><span class="co">#&gt; â„¹ replace theta names</span></span>
<span><span class="co">#&gt; â„¹ done</span></span>
<span><span class="co">#&gt; â„¹ replace eta names</span></span>
<span><span class="co">#&gt; â„¹ done (no labels)</span></span>
<span><span class="co">#&gt; â„¹ renaming compartments</span></span>
<span><span class="co">#&gt; â„¹ done</span></span>
<span><span class="co">#&gt; using C compiler: â€˜gcc (Ubuntu 11.3.0-1ubuntu1~22.04.1) 11.3.0â€™</span></span>
<span><span class="co">#&gt; In file included from /usr/share/R/include/R.h:71,</span></span>
<span><span class="co">#&gt;                  from /home/matt/R/x86_64-pc-linux-gnu-library/4.3/rxode2/include/rxode2.h:9,</span></span>
<span><span class="co">#&gt;                  from /home/matt/R/x86_64-pc-linux-gnu-library/4.3/rxode2parse/include/rxode2_model_shared.h:3,</span></span>
<span><span class="co">#&gt;                  from rx_edd6c2bb8fc0df18bd2c37d123e584da_.c:115:</span></span>
<span><span class="co">#&gt; /usr/share/R/include/R_ext/Complex.h:80:6: warning: ISO C99 doesnâ€™t support unnamed structs/unions [-Wpedantic]</span></span>
<span><span class="co">#&gt;    80 |     };</span></span>
<span><span class="co">#&gt;       |      ^</span></span>
<span><span class="co">#&gt; â„¹ solving ipred problem</span></span>
<span><span class="co">#&gt; â„¹ done</span></span>
<span><span class="co">#&gt; â„¹ solving pred problem</span></span>
<span><span class="co">#&gt; â„¹ done</span></span>
<span></span>
<span><span class="va">mod</span></span>
<span><span class="co">#&gt;  â”€â”€ rxode2-based free-form 2-cmt ODE model â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ </span></span>
<span><span class="co">#&gt;  â”€â”€ Initalization: â”€â”€  </span></span>
<span><span class="co">#&gt; Fixed Effects ($theta): </span></span>
<span><span class="co">#&gt;    theta1    theta2    theta3    theta4       RSV </span></span>
<span><span class="co">#&gt; 1.3703404 4.1981491 1.3800349 3.8765734 0.1964461 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Omega ($omega): </span></span>
<span><span class="co">#&gt;           eta1       eta2      eta3       eta4</span></span>
<span><span class="co">#&gt; eta1 0.1012514 0.00000000 0.0000000 0.00000000</span></span>
<span><span class="co">#&gt; eta2 0.0000000 0.09938724 0.0000000 0.00000000</span></span>
<span><span class="co">#&gt; eta3 0.0000000 0.00000000 0.1013027 0.00000000</span></span>
<span><span class="co">#&gt; eta4 0.0000000 0.00000000 0.0000000 0.07304975</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; States ($state or $stateDf): </span></span>
<span><span class="co">#&gt;   Compartment Number Compartment Name</span></span>
<span><span class="co">#&gt; 1                  1          CENTRAL</span></span>
<span><span class="co">#&gt; 2                  2             PERI</span></span>
<span><span class="co">#&gt;  â”€â”€ Î¼-referencing ($muRefTable): â”€â”€  </span></span>
<span><span class="co">#&gt;    theta  eta level</span></span>
<span><span class="co">#&gt; 1 theta1 eta1    id</span></span>
<span><span class="co">#&gt; 2 theta2 eta2    id</span></span>
<span><span class="co">#&gt; 3 theta3 eta3    id</span></span>
<span><span class="co">#&gt; 4 theta4 eta4    id</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  â”€â”€ Model (Normalized Syntax): â”€â”€ </span></span>
<span><span class="co">#&gt; function() {</span></span>
<span><span class="co">#&gt;     description &lt;- "BOLUS_2CPT_CLV1QV2 SINGLE DOSE FOCEI (120 Ind/2280 Obs) runODE032"</span></span>
<span><span class="co">#&gt;     validation &lt;- c("IPRED relative difference compared to Nonmem IPRED: 0%; 95% percentile: (0%,0%); rtol=6.43e-06", </span></span>
<span><span class="co">#&gt;         "IPRED absolute difference compared to Nonmem IPRED: 95% percentile: (2.19e-05, 0.0418); atol=0.00167", </span></span>
<span><span class="co">#&gt;         "IWRES relative difference compared to Nonmem IWRES: 0%; 95% percentile: (0%,0.01%); rtol=8.99e-06", </span></span>
<span><span class="co">#&gt;         "IWRES absolute difference compared to Nonmem IWRES: 95% percentile: (1.82e-07, 4.63e-05); atol=3.65e-06", </span></span>
<span><span class="co">#&gt;         "PRED relative difference compared to Nonmem PRED: 0%; 95% percentile: (0%,0%); rtol=6.41e-06", </span></span>
<span><span class="co">#&gt;         "PRED absolute difference compared to Nonmem PRED: 95% percentile: (1.41e-07,0.00382) atol=6.41e-06")</span></span>
<span><span class="co">#&gt;     ini({</span></span>
<span><span class="co">#&gt;         theta1 &lt;- 1.37034036528946</span></span>
<span><span class="co">#&gt;         label("log Cl")</span></span>
<span><span class="co">#&gt;         theta2 &lt;- 4.19814911033061</span></span>
<span><span class="co">#&gt;         label("log Vc")</span></span>
<span><span class="co">#&gt;         theta3 &lt;- 1.38003493562413</span></span>
<span><span class="co">#&gt;         label("log Q")</span></span>
<span><span class="co">#&gt;         theta4 &lt;- 3.87657341967489</span></span>
<span><span class="co">#&gt;         label("log Vp")</span></span>
<span><span class="co">#&gt;         RSV &lt;- c(0, 0.196446108190896, 1)</span></span>
<span><span class="co">#&gt;         label("RSV")</span></span>
<span><span class="co">#&gt;         eta1 ~ 0.101251418415006</span></span>
<span><span class="co">#&gt;         eta2 ~ 0.0993872449483344</span></span>
<span><span class="co">#&gt;         eta3 ~ 0.101302674763154</span></span>
<span><span class="co">#&gt;         eta4 ~ 0.0730497519364148</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt;     model({</span></span>
<span><span class="co">#&gt;         cmt(CENTRAL)</span></span>
<span><span class="co">#&gt;         cmt(PERI)</span></span>
<span><span class="co">#&gt;         cl &lt;- exp(theta1 + eta1)</span></span>
<span><span class="co">#&gt;         v &lt;- exp(theta2 + eta2)</span></span>
<span><span class="co">#&gt;         q &lt;- exp(theta3 + eta3)</span></span>
<span><span class="co">#&gt;         v2 &lt;- exp(theta4 + eta4)</span></span>
<span><span class="co">#&gt;         v1 &lt;- v</span></span>
<span><span class="co">#&gt;         scale1 &lt;- v</span></span>
<span><span class="co">#&gt;         k21 &lt;- q/v2</span></span>
<span><span class="co">#&gt;         k12 &lt;- q/v</span></span>
<span><span class="co">#&gt;         d/dt(CENTRAL) &lt;- k21 * PERI - k12 * CENTRAL - cl * CENTRAL/v1</span></span>
<span><span class="co">#&gt;         d/dt(PERI) &lt;- -k21 * PERI + k12 * CENTRAL</span></span>
<span><span class="co">#&gt;         f &lt;- CENTRAL/scale1</span></span>
<span><span class="co">#&gt;         ipred &lt;- f</span></span>
<span><span class="co">#&gt;         rescv &lt;- RSV</span></span>
<span><span class="co">#&gt;         ipred ~ prop(RSV)</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt;  â”€â”€ nonmem2rx translation notes ($notes): â”€â”€  </span></span>
<span><span class="co">#&gt;    â€¢ there are duplicate eta names, not renaming duplicate parameters </span></span>
<span><span class="co">#&gt;    â€¢ there are duplicate theta names, not renaming duplicate parameters </span></span>
<span><span class="co">#&gt;  â”€â”€ nonmem2rx extra properties: â”€â”€  </span></span>
<span><span class="co">#&gt; other properties include: $nonmemData, $etaData, $thetaMat, $dfSub, $dfObs</span></span>
<span><span class="co">#&gt; captured NONMEM table outputs: $predData, $ipredData</span></span>
<span><span class="co">#&gt; NONMEM/rxode2 comparison data: $iwresCompare, $predCompare, $ipredCompare</span></span>
<span><span class="co">#&gt; NONMEM/rxode2 composite comparison: $predAtol, $predRtol, $ipredAtol, $ipredRtol, $iwresAtol, $iwresRtol</span></span></code></pre></div>
<p>You can see this automatically validates NONMEM and rxode2 outputs for a couple of metrics.</p>
</div>
</div>
<div class="section level1">
<h1 id="external-projects-that-contributed-to-the-tools-validation">External projects that contributed to the toolâ€™s validation<a class="anchor" aria-label="anchor" href="#external-projects-that-contributed-to-the-tools-validation"></a>
</h1>
<p>The <code>nonmem2rx</code> tool was validated against:</p>
<ul>
<li><p>The <code>PsN</code> library test suite of NONMEM listings (<a href="https://github.com/UUPharmacometrics/PsN/tree/master/test" class="external-link uri">https://github.com/UUPharmacometrics/PsN/tree/master/test</a>)</p></li>
<li><p>The ddmore model scrapings (<a href="https://github.com/dpastoor/ddmore_scraping" class="external-link uri">https://github.com/dpastoor/ddmore_scraping</a>).</p></li>
<li><p>Models from NONMEM design tutorial Bauer 2021 <a href="https://doi.org/10.1002/psp4.12713" class="external-link uri">https://doi.org/10.1002/psp4.12713</a></p></li>
<li><p>Models from NONMEM tutorial 1 (Bauer 2019) <a href="https://doi.org/10.1002/psp4.12404" class="external-link uri">https://doi.org/10.1002/psp4.12404</a></p></li>
<li><p>Models from NONMEM tutorial 2 (Bauer 2019) <a href="https://doi.org/10.1002/psp4.12422" class="external-link uri">https://doi.org/10.1002/psp4.12422</a></p></li>
</ul>
<p>Due to the sheer size of the zipped models for these nonmem control stream sources, these are excluded to keep the binary below 3 mgs (CRAN requirement).</p>
<p>However, I would like to acknowledge all who helped in these projects. With these projects the NONMEM conversion to rxode2 has been made much more robust.</p>
<p>Still, while the tests are not/will not be in the CRAN binaries, you can test them yourself by:</p>
<ol style="list-style-type: decimal">
<li>Downloading this repository</li>
<li>Running the tests <code><a href="https://devtools.r-lib.org/reference/test.html" class="external-link">devtools::test()</a></code>
</li>
</ol>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=nonmem2rx" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/nlmixr2/nonmem2rx/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 3)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing nonmem2rx</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Matthew Fidler <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8538-6691" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/nlmixr2/nonmem2rx/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/nlmixr2/nonmem2rx/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/nlmixr2/nonmem2rx?branch=main" class="external-link"><img src="https://codecov.io/gh/nlmixr2/nonmem2rx/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://cran.r-project.org/package=nonmem2rx" class="external-link"><img src="http://www.r-pkg.org/badges/version/nonmem2rx" alt="CRAN version"></a></li>
<li><a href="https://cran.r-project.org/package=nonmem2rx" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/nonmem2rx" alt="CRAN total downloads"></a></li>
<li><a href="https://cran.r-project.org/package=nonmem2rx" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/nonmem2rx" alt="CRAN total downloads"></a></li>
<li><a href="https://www.codefactor.io/repository/github/nlmixr2/nonmem2rx" class="external-link"><img src="https://www.codefactor.io/repository/github/nlmixr2/nonmem2rx/badge" alt="CodeFactor"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Fidler.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
